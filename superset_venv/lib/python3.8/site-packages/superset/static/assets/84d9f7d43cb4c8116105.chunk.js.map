{"version":3,"file":"84d9f7d43cb4c8116105.chunk.js","mappings":"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","sources":["webpack://superset/./src/types/ChartSource.ts","webpack://superset/./src/components/Chart/ChartContextMenu.tsx","webpack://superset/./src/components/Chart/ChartRenderer.jsx","webpack://superset/./src/components/Chart/ChartErrorMessage.tsx","webpack://superset/./src/components/Chart/Chart.jsx","webpack://superset/./src/components/Chart/ChartContainer.jsx","webpack://superset/./src/explore/components/EmbedCodeContent.jsx","webpack://superset/./src/explore/components/useExploreAdditionalActionsMenu/DashboardsSubMenu.tsx","webpack://superset/./src/explore/components/useExploreAdditionalActionsMenu/index.jsx","webpack://superset/./src/components/Table/cell-renderers/BooleanCell/index.tsx","webpack://superset/./src/components/Table/cell-renderers/NullCell/index.tsx","webpack://superset/./src/components/Table/cell-renderers/TimeCell/index.tsx","webpack://superset/./src/components/Table/header-renderers/HeaderWithRadioGroup.tsx","webpack://superset/./src/components/Chart/DrillDetail/DrillDetailTableControls.tsx","webpack://superset/./src/components/Chart/DrillDetail/DrillDetailPane.tsx","webpack://superset/./src/components/Chart/DrillDetail/utils.ts","webpack://superset/./src/components/Chart/DrillDetail/DrillDetailModal.tsx","webpack://superset/./src/components/Chart/DrillDetail/DrillDetailMenuItems.tsx","webpack://superset/./src/components/Chart/utils.ts","webpack://superset/./src/components/CronPicker/CronPicker.tsx","webpack://superset/./src/components/Dropdown/index.tsx","webpack://superset/./src/components/MetadataBar/ContentConfig.tsx","webpack://superset/./src/components/MetadataBar/MetadataBar.tsx","webpack://superset/./src/components/MetadataBar/ContentType.ts","webpack://superset/./src/components/MetadataBar/index.tsx","webpack://superset/./src/reports/types.ts","webpack://superset/./src/components/ReportModal/styles.tsx","webpack://superset/./src/components/ReportModal/index.tsx","webpack://superset/./src/components/ReportModal/HeaderReportDropdown/index.tsx","webpack://superset/./src/components/Switch/index.tsx","webpack://superset/./src/components/TimezoneSelector/index.tsx","webpack://superset/./src/dashboard/util/activeAllDashboardFilters.ts","webpack://superset/./src/dashboard/util/charts/getEffectiveExtraFilters.ts","webpack://superset/./src/dashboard/util/charts/getFormDataWithExtraFilters.ts","webpack://superset/./src/explore/components/DataTablesPane/types.ts","webpack://superset/./src/explore/components/DataTablesPane/components/DataTableControls.tsx","webpack://superset/./src/explore/components/DataTablesPane/components/SingleQueryResultPane.tsx","webpack://superset/./src/explore/components/DataTablesPane/components/useResultsPane.tsx","webpack://superset/./src/explore/components/DataTablesPane/components/ResultsPaneOnDashboard.tsx","webpack://superset/./src/explore/components/DataTablesPane/components/SamplesPane.tsx","webpack://superset/./src/explore/components/DataTablesPane/DataTablesPane.tsx","webpack://superset/./src/explore/components/controls/ViewQueryModal.tsx","webpack://superset/./src/hooks/useChangeEffect/useChangeEffect.ts","webpack://superset/./src/hooks/useTabId.ts","webpack://superset/./src/utils/downloadAsImage.ts","webpack://superset/./src/utils/getChartRequiredFieldsMissingMessage.ts","webpack://superset/./src/utils/isBot.ts"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nexport enum ChartSource {\n  Explore = 'explore',\n  Dashboard = 'dashboard',\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, {\n  forwardRef,\n  RefObject,\n  useCallback,\n  useImperativeHandle,\n  useState,\n} from 'react';\nimport ReactDOM from 'react-dom';\nimport { useSelector } from 'react-redux';\nimport {\n  BinaryQueryObjectFilterClause,\n  FeatureFlag,\n  isFeatureEnabled,\n  QueryFormData,\n} from '@superset-ui/core';\nimport { RootState } from 'src/dashboard/types';\nimport { findPermission } from 'src/utils/findPermission';\nimport { Menu } from 'src/components/Menu';\nimport { AntdDropdown as Dropdown } from 'src/components';\nimport { DrillDetailMenuItems } from './DrillDetail';\nimport { getMenuAdjustedY } from './utils';\n\nexport interface ChartContextMenuProps {\n  id: number;\n  formData: QueryFormData;\n  onSelection: () => void;\n  onClose: () => void;\n}\n\nexport interface Ref {\n  open: (\n    clientX: number,\n    clientY: number,\n    filters?: BinaryQueryObjectFilterClause[],\n  ) => void;\n}\n\nconst ChartContextMenu = (\n  { id, formData, onSelection, onClose }: ChartContextMenuProps,\n  ref: RefObject<Ref>,\n) => {\n  const canExplore = useSelector((state: RootState) =>\n    findPermission('can_explore', 'Superset', state.user?.roles),\n  );\n\n  const [{ filters, clientX, clientY }, setState] = useState<{\n    clientX: number;\n    clientY: number;\n    filters?: BinaryQueryObjectFilterClause[];\n  }>({ clientX: 0, clientY: 0 });\n\n  const menuItems = [];\n  const showDrillToDetail =\n    isFeatureEnabled(FeatureFlag.DRILL_TO_DETAIL) && canExplore;\n\n  if (showDrillToDetail) {\n    menuItems.push(\n      <DrillDetailMenuItems\n        chartId={id}\n        formData={formData}\n        filters={filters}\n        isContextMenu\n        contextMenuY={clientY}\n        onSelection={onSelection}\n      />,\n    );\n  }\n\n  const open = useCallback(\n    (\n      clientX: number,\n      clientY: number,\n      filters?: BinaryQueryObjectFilterClause[],\n    ) => {\n      const itemsCount =\n        [\n          showDrillToDetail ? 2 : 0, // Drill to detail always has 2 top-level menu items\n        ].reduce((a, b) => a + b, 0) || 1; // \"No actions\" appears if no actions in menu\n\n      const adjustedY = getMenuAdjustedY(clientY, itemsCount);\n      setState({\n        clientX,\n        clientY: adjustedY,\n        filters,\n      });\n\n      // Since Ant Design's Dropdown does not offer an imperative API\n      // and we can't attach event triggers to charts SVG elements, we\n      // use a hidden span that gets clicked on when receiving click events\n      // from the charts.\n      document.getElementById(`hidden-span-${id}`)?.click();\n    },\n    [id, showDrillToDetail],\n  );\n\n  useImperativeHandle(\n    ref,\n    () => ({\n      open,\n    }),\n    [open],\n  );\n\n  return ReactDOM.createPortal(\n    <Dropdown\n      overlay={\n        <Menu>\n          {menuItems.length ? (\n            menuItems\n          ) : (\n            <Menu.Item disabled>No actions</Menu.Item>\n          )}\n        </Menu>\n      }\n      trigger={['click']}\n      onVisibleChange={value => !value && onClose()}\n    >\n      <span\n        id={`hidden-span-${id}`}\n        css={{\n          visibility: 'hidden',\n          position: 'fixed',\n          top: clientY,\n          left: clientX,\n          width: 1,\n          height: 1,\n        }}\n      />\n    </Dropdown>,\n    document.body,\n  );\n};\n\nexport default forwardRef(ChartContextMenu);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { snakeCase, isEqual } from 'lodash';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {\n  SuperChart,\n  logging,\n  Behavior,\n  t,\n  isFeatureEnabled,\n  FeatureFlag,\n  getChartMetadataRegistry,\n} from '@superset-ui/core';\nimport { Logger, LOG_ACTIONS_RENDER_CHART } from 'src/logger/LogUtils';\nimport { EmptyStateBig, EmptyStateSmall } from 'src/components/EmptyState';\nimport { ChartSource } from 'src/types/ChartSource';\nimport ChartContextMenu from './ChartContextMenu';\n\nconst propTypes = {\n  annotationData: PropTypes.object,\n  actions: PropTypes.object,\n  chartId: PropTypes.number.isRequired,\n  datasource: PropTypes.object,\n  initialValues: PropTypes.object,\n  formData: PropTypes.object.isRequired,\n  latestQueryFormData: PropTypes.object,\n  labelColors: PropTypes.object,\n  sharedLabelColors: PropTypes.object,\n  height: PropTypes.number,\n  width: PropTypes.number,\n  setControlValue: PropTypes.func,\n  vizType: PropTypes.string.isRequired,\n  triggerRender: PropTypes.bool,\n  // state\n  chartAlert: PropTypes.string,\n  chartStatus: PropTypes.string,\n  queriesResponse: PropTypes.arrayOf(PropTypes.object),\n  triggerQuery: PropTypes.bool,\n  chartIsStale: PropTypes.bool,\n  // dashboard callbacks\n  addFilter: PropTypes.func,\n  setDataMask: PropTypes.func,\n  onFilterMenuOpen: PropTypes.func,\n  onFilterMenuClose: PropTypes.func,\n  ownState: PropTypes.object,\n  postTransformProps: PropTypes.func,\n  source: PropTypes.oneOf([ChartSource.Dashboard, ChartSource.Explore]),\n  emitCrossFilters: PropTypes.bool,\n};\n\nconst BLANK = {};\n\nconst BIG_NO_RESULT_MIN_WIDTH = 300;\nconst BIG_NO_RESULT_MIN_HEIGHT = 220;\n\nconst behaviors = [Behavior.INTERACTIVE_CHART];\n\nconst defaultProps = {\n  addFilter: () => BLANK,\n  onFilterMenuOpen: () => BLANK,\n  onFilterMenuClose: () => BLANK,\n  initialValues: BLANK,\n  setControlValue() {},\n  triggerRender: false,\n};\n\nclass ChartRenderer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showContextMenu:\n        props.source === ChartSource.Dashboard &&\n        isFeatureEnabled(FeatureFlag.DRILL_TO_DETAIL),\n      inContextMenu: false,\n    };\n    this.hasQueryResponseChange = false;\n\n    this.contextMenuRef = React.createRef();\n\n    this.handleAddFilter = this.handleAddFilter.bind(this);\n    this.handleRenderSuccess = this.handleRenderSuccess.bind(this);\n    this.handleRenderFailure = this.handleRenderFailure.bind(this);\n    this.handleSetControlValue = this.handleSetControlValue.bind(this);\n    this.handleOnContextMenu = this.handleOnContextMenu.bind(this);\n    this.handleContextMenuSelected = this.handleContextMenuSelected.bind(this);\n    this.handleContextMenuClosed = this.handleContextMenuClosed.bind(this);\n    this.onContextMenuFallback = this.onContextMenuFallback.bind(this);\n\n    this.hooks = {\n      onAddFilter: this.handleAddFilter,\n      onContextMenu: this.state.showContextMenu\n        ? this.handleOnContextMenu\n        : undefined,\n      onError: this.handleRenderFailure,\n      setControlValue: this.handleSetControlValue,\n      onFilterMenuOpen: this.props.onFilterMenuOpen,\n      onFilterMenuClose: this.props.onFilterMenuClose,\n      setDataMask: dataMask => {\n        this.props.actions?.updateDataMask(this.props.chartId, dataMask);\n      },\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    const resultsReady =\n      nextProps.queriesResponse &&\n      ['success', 'rendered'].indexOf(nextProps.chartStatus) > -1 &&\n      !nextProps.queriesResponse?.[0]?.error;\n\n    if (resultsReady) {\n      if (!isEqual(this.state, nextState)) {\n        return true;\n      }\n      this.hasQueryResponseChange =\n        nextProps.queriesResponse !== this.props.queriesResponse;\n      return (\n        this.hasQueryResponseChange ||\n        !isEqual(nextProps.datasource, this.props.datasource) ||\n        nextProps.annotationData !== this.props.annotationData ||\n        nextProps.ownState !== this.props.ownState ||\n        nextProps.filterState !== this.props.filterState ||\n        nextProps.height !== this.props.height ||\n        nextProps.width !== this.props.width ||\n        nextProps.triggerRender ||\n        nextProps.labelColors !== this.props.labelColors ||\n        nextProps.sharedLabelColors !== this.props.sharedLabelColors ||\n        nextProps.formData.color_scheme !== this.props.formData.color_scheme ||\n        nextProps.formData.stack !== this.props.formData.stack ||\n        nextProps.cacheBusterProp !== this.props.cacheBusterProp ||\n        nextProps.emitCrossFilters !== this.props.emitCrossFilters\n      );\n    }\n    return false;\n  }\n\n  handleAddFilter(col, vals, merge = true, refresh = true) {\n    this.props.addFilter(col, vals, merge, refresh);\n  }\n\n  handleRenderSuccess() {\n    const { actions, chartStatus, chartId, vizType } = this.props;\n    if (['loading', 'rendered'].indexOf(chartStatus) < 0) {\n      actions.chartRenderingSucceeded(chartId);\n    }\n\n    // only log chart render time which is triggered by query results change\n    // currently we don't log chart re-render time, like window resize etc\n    if (this.hasQueryResponseChange) {\n      actions.logEvent(LOG_ACTIONS_RENDER_CHART, {\n        slice_id: chartId,\n        viz_type: vizType,\n        start_offset: this.renderStartTime,\n        ts: new Date().getTime(),\n        duration: Logger.getTimestamp() - this.renderStartTime,\n      });\n    }\n  }\n\n  handleRenderFailure(error, info) {\n    const { actions, chartId } = this.props;\n    logging.warn(error);\n    actions.chartRenderingFailed(\n      error.toString(),\n      chartId,\n      info ? info.componentStack : null,\n    );\n\n    // only trigger render log when query is changed\n    if (this.hasQueryResponseChange) {\n      actions.logEvent(LOG_ACTIONS_RENDER_CHART, {\n        slice_id: chartId,\n        has_err: true,\n        error_details: error.toString(),\n        start_offset: this.renderStartTime,\n        ts: new Date().getTime(),\n        duration: Logger.getTimestamp() - this.renderStartTime,\n      });\n    }\n  }\n\n  handleSetControlValue(...args) {\n    const { setControlValue } = this.props;\n    if (setControlValue) {\n      setControlValue(...args);\n    }\n  }\n\n  handleOnContextMenu(offsetX, offsetY, filters) {\n    this.contextMenuRef.current.open(offsetX, offsetY, filters);\n    this.setState({ inContextMenu: true });\n  }\n\n  handleContextMenuSelected() {\n    this.setState({ inContextMenu: false });\n  }\n\n  handleContextMenuClosed() {\n    this.setState({ inContextMenu: false });\n  }\n\n  // When viz plugins don't handle `contextmenu` event, fallback handler\n  // calls `handleOnContextMenu` with no `filters` param.\n  onContextMenuFallback(event) {\n    if (!this.state.inContextMenu) {\n      event.preventDefault();\n      this.handleOnContextMenu(event.clientX, event.clientY);\n    }\n  }\n\n  render() {\n    const { chartAlert, chartStatus, chartId, emitCrossFilters } = this.props;\n\n    // Skip chart rendering\n    if (chartStatus === 'loading' || !!chartAlert || chartStatus === null) {\n      return null;\n    }\n\n    this.renderStartTime = Logger.getTimestamp();\n\n    const {\n      width,\n      height,\n      datasource,\n      annotationData,\n      initialValues,\n      ownState,\n      filterState,\n      chartIsStale,\n      formData,\n      latestQueryFormData,\n      queriesResponse,\n      postTransformProps,\n    } = this.props;\n\n    const currentFormData =\n      chartIsStale && latestQueryFormData ? latestQueryFormData : formData;\n    const vizType = currentFormData.viz_type || this.props.vizType;\n\n    // It's bad practice to use unprefixed `vizType` as classnames for chart\n    // container. It may cause css conflicts as in the case of legacy table chart.\n    // When migrating charts, we should gradually add a `superset-chart-` prefix\n    // to each one of them.\n    const snakeCaseVizType = snakeCase(vizType);\n    const chartClassName =\n      vizType === 'table'\n        ? `superset-chart-${snakeCaseVizType}`\n        : snakeCaseVizType;\n\n    const webpackHash =\n      process.env.WEBPACK_MODE === 'development'\n        ? `-${\n            // eslint-disable-next-line camelcase\n            typeof __webpack_require__ !== 'undefined' &&\n            // eslint-disable-next-line camelcase, no-undef\n            typeof __webpack_require__.h === 'function' &&\n            // eslint-disable-next-line no-undef\n            __webpack_require__.h()\n          }`\n        : '';\n\n    let noResultsComponent;\n    const noResultTitle = t('No results were returned for this query');\n    const noResultDescription =\n      this.props.source === ChartSource.Explore\n        ? t(\n            'Make sure that the controls are configured properly and the datasource contains data for the selected time range',\n          )\n        : undefined;\n    const noResultImage = 'chart.svg';\n    if (width > BIG_NO_RESULT_MIN_WIDTH && height > BIG_NO_RESULT_MIN_HEIGHT) {\n      noResultsComponent = (\n        <EmptyStateBig\n          title={noResultTitle}\n          description={noResultDescription}\n          image={noResultImage}\n        />\n      );\n    } else {\n      noResultsComponent = (\n        <EmptyStateSmall title={noResultTitle} image={noResultImage} />\n      );\n    }\n\n    // Check for Behavior.DRILL_TO_DETAIL to tell if chart can receive Drill to\n    // Detail props or if it'll cause side-effects (e.g. excessive re-renders).\n    const drillToDetailProps = getChartMetadataRegistry()\n      .get(formData.viz_type)\n      ?.behaviors.find(behavior => behavior === Behavior.DRILL_TO_DETAIL)\n      ? { inContextMenu: this.state.inContextMenu }\n      : {};\n\n    return (\n      <>\n        {this.state.showContextMenu && (\n          <ChartContextMenu\n            ref={this.contextMenuRef}\n            id={chartId}\n            formData={currentFormData}\n            onSelection={this.handleContextMenuSelected}\n            onClose={this.handleContextMenuClosed}\n          />\n        )}\n        <div\n          onContextMenu={\n            this.state.showContextMenu ? this.onContextMenuFallback : undefined\n          }\n        >\n          <SuperChart\n            disableErrorBoundary\n            key={`${chartId}${webpackHash}`}\n            id={`chart-id-${chartId}`}\n            className={chartClassName}\n            chartType={vizType}\n            width={width}\n            height={height}\n            annotationData={annotationData}\n            datasource={datasource}\n            initialValues={initialValues}\n            formData={currentFormData}\n            ownState={ownState}\n            filterState={filterState}\n            hooks={this.hooks}\n            behaviors={behaviors}\n            queriesData={queriesResponse}\n            onRenderSuccess={this.handleRenderSuccess}\n            onRenderFailure={this.handleRenderFailure}\n            noResults={noResultsComponent}\n            postTransformProps={postTransformProps}\n            emitCrossFilters={emitCrossFilters}\n            {...drillToDetailProps}\n          />\n        </div>\n      </>\n    );\n  }\n}\n\nChartRenderer.propTypes = propTypes;\nChartRenderer.defaultProps = defaultProps;\n\nexport default ChartRenderer;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React from 'react';\nimport { useChartOwnerNames } from 'src/hooks/apiResources';\nimport ErrorMessageWithStackTrace from 'src/components/ErrorMessage/ErrorMessageWithStackTrace';\nimport { SupersetError } from 'src/components/ErrorMessage/types';\n\ninterface Props {\n  chartId: string;\n  error?: SupersetError;\n}\n\n/**\n * fetches the chart owners and adds them to the extra data of the error message\n */\nexport const ChartErrorMessage: React.FC<Props> = ({\n  chartId,\n  error,\n  ...props\n}) => {\n  const { result: owners } = useChartOwnerNames(chartId);\n\n  // don't mutate props\n  const ownedError = error && {\n    ...error,\n    extra: { ...error.extra, owners },\n  };\n\n  return <ErrorMessageWithStackTrace {...props} error={ownedError} />;\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { styled, logging, t, ensureIsArray } from '@superset-ui/core';\n\nimport { isFeatureEnabled, FeatureFlag } from 'src/featureFlags';\nimport { PLACEHOLDER_DATASOURCE } from 'src/dashboard/constants';\nimport Loading from 'src/components/Loading';\nimport { EmptyStateBig } from 'src/components/EmptyState';\nimport ErrorBoundary from 'src/components/ErrorBoundary';\nimport { Logger, LOG_ACTIONS_RENDER_CHART } from 'src/logger/LogUtils';\nimport { URL_PARAMS } from 'src/constants';\nimport { getUrlParam } from 'src/utils/urlUtils';\nimport { isCurrentUserBot } from 'src/utils/isBot';\nimport { ChartSource } from 'src/types/ChartSource';\nimport { ResourceStatus } from 'src/hooks/apiResources/apiResources';\nimport ChartRenderer from './ChartRenderer';\nimport { ChartErrorMessage } from './ChartErrorMessage';\nimport { getChartRequiredFieldsMissingMessage } from '../../utils/getChartRequiredFieldsMissingMessage';\n\nconst propTypes = {\n  annotationData: PropTypes.object,\n  actions: PropTypes.object,\n  chartId: PropTypes.number.isRequired,\n  datasource: PropTypes.object,\n  // current chart is included by dashboard\n  dashboardId: PropTypes.number,\n  // original selected values for FilterBox viz\n  // so that FilterBox can pre-populate selected values\n  // only affect UI control\n  initialValues: PropTypes.object,\n  // formData contains chart's own filter parameter\n  // and merged with extra filter that current dashboard applying\n  formData: PropTypes.object.isRequired,\n  labelColors: PropTypes.object,\n  sharedLabelColors: PropTypes.object,\n  width: PropTypes.number,\n  height: PropTypes.number,\n  setControlValue: PropTypes.func,\n  timeout: PropTypes.number,\n  vizType: PropTypes.string.isRequired,\n  triggerRender: PropTypes.bool,\n  force: PropTypes.bool,\n  isFiltersInitialized: PropTypes.bool,\n  isDeactivatedViz: PropTypes.bool,\n  // state\n  chartAlert: PropTypes.string,\n  chartStatus: PropTypes.string,\n  chartStackTrace: PropTypes.string,\n  queriesResponse: PropTypes.arrayOf(PropTypes.object),\n  triggerQuery: PropTypes.bool,\n  chartIsStale: PropTypes.bool,\n  errorMessage: PropTypes.node,\n  // dashboard callbacks\n  addFilter: PropTypes.func,\n  onQuery: PropTypes.func,\n  onFilterMenuOpen: PropTypes.func,\n  onFilterMenuClose: PropTypes.func,\n  ownState: PropTypes.object,\n  postTransformProps: PropTypes.func,\n  datasetsStatus: PropTypes.oneOf(['loading', 'error', 'complete']),\n  isInView: PropTypes.bool,\n  emitCrossFilters: PropTypes.bool,\n};\n\nconst BLANK = {};\nconst NONEXISTENT_DATASET = t(\n  'The dataset associated with this chart no longer exists',\n);\n\nconst defaultProps = {\n  addFilter: () => BLANK,\n  onFilterMenuOpen: () => BLANK,\n  onFilterMenuClose: () => BLANK,\n  initialValues: BLANK,\n  setControlValue() {},\n  triggerRender: false,\n  dashboardId: null,\n  chartStackTrace: null,\n  isDeactivatedViz: false,\n  force: false,\n  isInView: true,\n};\n\nconst Styles = styled.div`\n  min-height: ${p => p.height}px;\n  position: relative;\n\n  .chart-tooltip {\n    opacity: 0.75;\n    font-size: ${({ theme }) => theme.typography.sizes.s}px;\n  }\n\n  .slice_container {\n    height: ${p => p.height}px;\n\n    .pivot_table tbody tr {\n      font-feature-settings: 'tnum' 1;\n    }\n\n    .alert {\n      margin: ${({ theme }) => theme.gridUnit * 2}px;\n    }\n  }\n`;\n\nconst MonospaceDiv = styled.div`\n  font-family: ${({ theme }) => theme.typography.families.monospace};\n  word-break: break-word;\n  overflow-x: auto;\n  white-space: pre-wrap;\n`;\n\nclass Chart extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.handleRenderContainerFailure =\n      this.handleRenderContainerFailure.bind(this);\n  }\n\n  componentDidMount() {\n    // during migration, hold chart queries before user choose review or cancel\n    if (\n      this.props.triggerQuery &&\n      this.props.filterboxMigrationState !== 'UNDECIDED'\n    ) {\n      this.runQuery();\n    }\n  }\n\n  componentDidUpdate() {\n    // during migration, hold chart queries before user choose review or cancel\n    if (\n      this.props.triggerQuery &&\n      this.props.filterboxMigrationState !== 'UNDECIDED'\n    ) {\n      // if the chart is deactivated (filter_box), only load once\n      if (this.props.isDeactivatedViz && this.props.queriesResponse) {\n        return;\n      }\n      this.runQuery();\n    }\n  }\n\n  runQuery() {\n    if (this.props.chartId > 0 && isFeatureEnabled(FeatureFlag.CLIENT_CACHE)) {\n      // Load saved chart with a GET request\n      this.props.actions.getSavedChart(\n        this.props.formData,\n        this.props.force || getUrlParam(URL_PARAMS.force), // allow override via url params force=true\n        this.props.timeout,\n        this.props.chartId,\n        this.props.dashboardId,\n        this.props.ownState,\n      );\n    } else {\n      // Create chart with POST request\n      this.props.actions.postChartFormData(\n        this.props.formData,\n        this.props.force || getUrlParam(URL_PARAMS.force), // allow override via url params force=true\n        this.props.timeout,\n        this.props.chartId,\n        this.props.dashboardId,\n        this.props.ownState,\n      );\n    }\n  }\n\n  handleRenderContainerFailure(error, info) {\n    const { actions, chartId } = this.props;\n    logging.warn(error);\n    actions.chartRenderingFailed(\n      error.toString(),\n      chartId,\n      info ? info.componentStack : null,\n    );\n\n    actions.logEvent(LOG_ACTIONS_RENDER_CHART, {\n      slice_id: chartId,\n      has_err: true,\n      error_details: error.toString(),\n      start_offset: this.renderStartTime,\n      ts: new Date().getTime(),\n      duration: Logger.getTimestamp() - this.renderStartTime,\n    });\n  }\n\n  renderErrorMessage(queryResponse) {\n    const {\n      chartId,\n      chartAlert,\n      chartStackTrace,\n      datasource,\n      dashboardId,\n      height,\n      datasetsStatus,\n    } = this.props;\n    const error = queryResponse?.errors?.[0];\n    const message = chartAlert || queryResponse?.message;\n\n    // if datasource is still loading, don't render JS errors\n    if (\n      chartAlert !== undefined &&\n      chartAlert !== NONEXISTENT_DATASET &&\n      datasource === PLACEHOLDER_DATASOURCE &&\n      datasetsStatus !== ResourceStatus.ERROR\n    ) {\n      return (\n        <Styles\n          key={chartId}\n          data-ui-anchor=\"chart\"\n          className=\"chart-container\"\n          data-test=\"chart-container\"\n          height={height}\n        >\n          <Loading />\n        </Styles>\n      );\n    }\n\n    return (\n      <ChartErrorMessage\n        key={chartId}\n        chartId={chartId}\n        error={error}\n        subtitle={<MonospaceDiv>{message}</MonospaceDiv>}\n        copyText={message}\n        link={queryResponse ? queryResponse.link : null}\n        source={dashboardId ? ChartSource.Dashboard : ChartSource.Explore}\n        stackTrace={chartStackTrace}\n      />\n    );\n  }\n\n  render() {\n    const {\n      height,\n      chartAlert,\n      chartStatus,\n      errorMessage,\n      chartIsStale,\n      queriesResponse = [],\n      isDeactivatedViz = false,\n      width,\n    } = this.props;\n\n    const isLoading = chartStatus === 'loading';\n    this.renderContainerStartTime = Logger.getTimestamp();\n    if (chartStatus === 'failed') {\n      return queriesResponse.map(item => this.renderErrorMessage(item));\n    }\n\n    if (errorMessage && ensureIsArray(queriesResponse).length === 0) {\n      return (\n        <EmptyStateBig\n          title={t('Add required control values to preview chart')}\n          description={getChartRequiredFieldsMissingMessage(true)}\n          image=\"chart.svg\"\n        />\n      );\n    }\n\n    if (\n      !isLoading &&\n      !chartAlert &&\n      !errorMessage &&\n      chartIsStale &&\n      ensureIsArray(queriesResponse).length === 0\n    ) {\n      return (\n        <EmptyStateBig\n          title={t('Your chart is ready to go!')}\n          description={\n            <span>\n              {t(\n                'Click on \"Create chart\" button in the control panel on the left to preview a visualization or',\n              )}{' '}\n              <span role=\"button\" tabIndex={0} onClick={this.props.onQuery}>\n                {t('click here')}\n              </span>\n              .\n            </span>\n          }\n          image=\"chart.svg\"\n        />\n      );\n    }\n\n    return (\n      <ErrorBoundary\n        onError={this.handleRenderContainerFailure}\n        showMessage={false}\n      >\n        <Styles\n          data-ui-anchor=\"chart\"\n          className=\"chart-container\"\n          data-test=\"chart-container\"\n          height={height}\n          width={width}\n        >\n          <div className=\"slice_container\" data-test=\"slice-container\">\n            {this.props.isInView ||\n            !isFeatureEnabled(FeatureFlag.DASHBOARD_VIRTUALIZATION) ||\n            isCurrentUserBot() ? (\n              <ChartRenderer\n                {...this.props}\n                source={this.props.dashboardId ? 'dashboard' : 'explore'}\n                data-test={this.props.vizType}\n              />\n            ) : (\n              <Loading />\n            )}\n          </div>\n          {isLoading && !isDeactivatedViz && <Loading />}\n        </Styles>\n      </ErrorBoundary>\n    );\n  }\n}\n\nChart.propTypes = propTypes;\nChart.defaultProps = defaultProps;\n\nexport default Chart;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\n\nimport * as actions from './chartAction';\nimport { logEvent } from '../../logger/actions';\nimport Chart from './Chart';\nimport { updateDataMask } from '../../dataMask/actions';\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators(\n      {\n        ...actions,\n        updateDataMask,\n        logEvent,\n      },\n      dispatch,\n    ),\n  };\n}\n\nexport default connect(null, mapDispatchToProps)(Chart);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { css, styled, t } from '@superset-ui/core';\nimport { Input, TextArea } from 'src/components/Input';\nimport CopyToClipboard from 'src/components/CopyToClipboard';\nimport { URL_PARAMS } from 'src/constants';\nimport { getChartPermalink } from 'src/utils/urlUtils';\nimport { CopyButton } from './DataTableControl';\n\nconst CopyButtonEmbedCode = styled(CopyButton)`\n  && {\n    margin: 0 0 ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nconst EmbedCodeContent = ({ formData, addDangerToast }) => {\n  const [height, setHeight] = useState('400');\n  const [width, setWidth] = useState('600');\n  const [url, setUrl] = useState('');\n  const [errorMessage, setErrorMessage] = useState('');\n\n  const handleInputChange = useCallback(e => {\n    const { value, name } = e.currentTarget;\n    if (name === 'width') {\n      setWidth(value);\n    }\n    if (name === 'height') {\n      setHeight(value);\n    }\n  }, []);\n\n  const updateUrl = useCallback(() => {\n    setUrl('');\n    getChartPermalink(formData)\n      .then(url => {\n        setUrl(url);\n        setErrorMessage('');\n      })\n      .catch(() => {\n        setErrorMessage(t('Error'));\n        addDangerToast(t('Sorry, something went wrong. Try again later.'));\n      });\n  }, [addDangerToast, formData]);\n\n  useEffect(() => {\n    updateUrl();\n  }, []);\n\n  const html = useMemo(() => {\n    if (!url) return '';\n    const srcLink = `${url}?${URL_PARAMS.standalone.name}=1&height=${height}`;\n    return (\n      '<iframe\\n' +\n      `  width=\"${width}\"\\n` +\n      `  height=\"${height}\"\\n` +\n      '  seamless\\n' +\n      '  frameBorder=\"0\"\\n' +\n      '  scrolling=\"no\"\\n' +\n      `  src=\"${srcLink}\"\\n` +\n      '>\\n' +\n      '</iframe>'\n    );\n  }, [height, url, width]);\n\n  const text = errorMessage || html || t('Generating link, please wait..');\n  return (\n    <div id=\"embed-code-popover\" data-test=\"embed-code-popover\">\n      <div\n        css={css`\n          display: flex;\n          flex-direction: column;\n        `}\n      >\n        <CopyToClipboard\n          shouldShowText={false}\n          text={html}\n          copyNode={\n            <CopyButtonEmbedCode buttonSize=\"xsmall\">\n              <i className=\"fa fa-clipboard\" />\n            </CopyButtonEmbedCode>\n          }\n        />\n        <TextArea\n          data-test=\"embed-code-textarea\"\n          name=\"embedCode\"\n          disabled={!html}\n          value={text}\n          rows=\"4\"\n          readOnly\n          css={theme => css`\n            resize: vertical;\n            padding: ${theme.gridUnit * 2}px;\n            font-size: ${theme.typography.sizes.s}px;\n            border-radius: 4px;\n            background-color: ${theme.colors.secondary.light5};\n          `}\n        />\n      </div>\n      <div\n        css={theme => css`\n          display: flex;\n          margin-top: ${theme.gridUnit * 4}px;\n          & > div {\n            margin-right: ${theme.gridUnit * 2}px;\n          }\n          & > div:last-of-type {\n            margin-right: 0;\n            margin-left: ${theme.gridUnit * 2}px;\n          }\n        `}\n      >\n        <div>\n          <label htmlFor=\"embed-height\">{t('Chart height')}</label>\n          <Input\n            type=\"text\"\n            defaultValue={height}\n            name=\"height\"\n            onChange={handleInputChange}\n          />\n        </div>\n        <div>\n          <label htmlFor=\"embed-width\">{t('Chart width')}</label>\n          <Input\n            type=\"text\"\n            defaultValue={width}\n            name=\"width\"\n            onChange={handleInputChange}\n            id=\"embed-width\"\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default EmbedCodeContent;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState } from 'react';\nimport { css, t, useTheme } from '@superset-ui/core';\nimport { Input } from 'src/components/Input';\nimport Icons from 'src/components/Icons';\nimport { Menu } from 'src/components/Menu';\nimport { Link } from 'react-router-dom';\n\nexport interface DashboardsSubMenuProps {\n  chartId?: number;\n  dashboards?: { id: number; dashboard_title: string }[];\n}\n\nconst WIDTH = 220;\nconst HEIGHT = 300;\nconst SEARCH_THRESHOLD = 10;\n\nconst DashboardsSubMenu = ({\n  chartId,\n  dashboards = [],\n  ...menuProps\n}: DashboardsSubMenuProps) => {\n  const theme = useTheme();\n  const [dashboardSearch, setDashboardSearch] = useState<string>();\n  const [hoveredItem, setHoveredItem] = useState<number | null>();\n  const showSearch = dashboards.length > SEARCH_THRESHOLD;\n  const filteredDashboards = dashboards.filter(\n    dashboard =>\n      !dashboardSearch ||\n      dashboard.dashboard_title\n        .toLowerCase()\n        .includes(dashboardSearch.toLowerCase()),\n  );\n  const noResults = dashboards.length === 0;\n  const noResultsFound = dashboardSearch && filteredDashboards.length === 0;\n  const urlQueryString = chartId ? `?focused_chart=${chartId}` : '';\n  return (\n    <>\n      {showSearch && (\n        <Input\n          allowClear\n          placeholder={t('Search')}\n          prefix={<Icons.Search iconSize=\"l\" />}\n          css={css`\n            width: ${WIDTH}px;\n            margin: ${theme.gridUnit * 2}px ${theme.gridUnit * 3}px;\n          `}\n          value={dashboardSearch}\n          onChange={e => setDashboardSearch(e.currentTarget.value)}\n        />\n      )}\n      <div\n        css={css`\n          max-height: ${HEIGHT}px;\n          overflow: auto;\n        `}\n      >\n        {filteredDashboards.map(dashboard => (\n          <Menu.Item\n            key={String(dashboard.id)}\n            onMouseEnter={() => setHoveredItem(dashboard.id)}\n            onMouseLeave={() => {\n              if (hoveredItem === dashboard.id) {\n                setHoveredItem(null);\n              }\n            }}\n            {...menuProps}\n          >\n            <Link\n              target=\"_blank\"\n              rel=\"noreferer noopener\"\n              to={`/superset/dashboard/${dashboard.id}${urlQueryString}`}\n            >\n              <div\n                css={css`\n                  display: flex;\n                  flex-direction: row;\n                  align-items: center;\n                  max-width: ${WIDTH}px;\n                `}\n              >\n                <div\n                  css={css`\n                    white-space: normal;\n                  `}\n                >\n                  {dashboard.dashboard_title}\n                </div>\n                <Icons.Full\n                  iconSize=\"l\"\n                  iconColor={theme.colors.grayscale.base}\n                  css={css`\n                    margin-left: ${theme.gridUnit * 2}px;\n                    visibility: ${hoveredItem === dashboard.id\n                      ? 'visible'\n                      : 'hidden'};\n                  `}\n                />\n              </div>\n            </Link>\n          </Menu.Item>\n        ))}\n        {noResultsFound && (\n          <div\n            css={css`\n              margin-left: ${theme.gridUnit * 3}px;\n              margin-bottom: ${theme.gridUnit}px;\n            `}\n          >\n            {t('No results found')}\n          </div>\n        )}\n        {noResults && (\n          <Menu.Item\n            disabled\n            css={css`\n              min-width: ${WIDTH}px;\n            `}\n            {...menuProps}\n          >\n            {t('None')}\n          </Menu.Item>\n        )}\n      </div>\n    </>\n  );\n};\n\nexport default DashboardsSubMenu;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { css, styled, t, useTheme } from '@superset-ui/core';\nimport Icons from 'src/components/Icons';\nimport { Menu } from 'src/components/Menu';\nimport ModalTrigger from 'src/components/ModalTrigger';\nimport Button from 'src/components/Button';\nimport { useToasts } from 'src/components/MessageToasts/withToasts';\nimport { exportChart, getChartKey } from 'src/explore/exploreUtils';\nimport downloadAsImage from 'src/utils/downloadAsImage';\nimport { getChartPermalink } from 'src/utils/urlUtils';\nimport copyTextToClipboard from 'src/utils/copy';\nimport HeaderReportDropDown from 'src/components/ReportModal/HeaderReportDropdown';\nimport { isFeatureEnabled, FeatureFlag } from 'src/featureFlags';\nimport ViewQueryModal from '../controls/ViewQueryModal';\nimport EmbedCodeContent from '../EmbedCodeContent';\nimport DashboardsSubMenu from './DashboardsSubMenu';\n\nconst MENU_KEYS = {\n  EDIT_PROPERTIES: 'edit_properties',\n  DASHBOARDS_ADDED_TO: 'dashboards_added_to',\n  DOWNLOAD_SUBMENU: 'download_submenu',\n  EXPORT_TO_CSV: 'export_to_csv',\n  EXPORT_TO_CSV_PIVOTED: 'export_to_csv_pivoted',\n  EXPORT_TO_JSON: 'export_to_json',\n  EXPORT_TO_XLSX: 'export_to_xlsx',\n  DOWNLOAD_AS_IMAGE: 'download_as_image',\n  SHARE_SUBMENU: 'share_submenu',\n  COPY_PERMALINK: 'copy_permalink',\n  EMBED_CODE: 'embed_code',\n  SHARE_BY_EMAIL: 'share_by_email',\n  REPORT_SUBMENU: 'report_submenu',\n  SET_UP_REPORT: 'set_up_report',\n  SET_REPORT_ACTIVE: 'set_report_active',\n  EDIT_REPORT: 'edit_report',\n  DELETE_REPORT: 'delete_report',\n  VIEW_QUERY: 'view_query',\n  RUN_IN_SQL_LAB: 'run_in_sql_lab',\n};\n\nconst VIZ_TYPES_PIVOTABLE = ['pivot_table', 'pivot_table_v2'];\n\nexport const MenuItemWithCheckboxContainer = styled.div`\n  ${({ theme }) => css`\n    display: flex;\n    align-items: center;\n\n    & svg {\n      width: ${theme.gridUnit * 3}px;\n      height: ${theme.gridUnit * 3}px;\n    }\n\n    & span[role='checkbox'] {\n      display: inline-flex;\n      margin-right: ${theme.gridUnit}px;\n    }\n  `}\n`;\n\nexport const MenuTrigger = styled(Button)`\n  ${({ theme }) => css`\n    width: ${theme.gridUnit * 8}px;\n    height: ${theme.gridUnit * 8}px;\n    padding: 0;\n    border: 1px solid ${theme.colors.primary.dark2};\n\n    &.ant-btn > span.anticon {\n      line-height: 0;\n      transition: inherit;\n    }\n\n    &:hover:not(:focus) > span.anticon {\n      color: ${theme.colors.primary.light1};\n    }\n  `}\n`;\n\nconst iconReset = css`\n  .ant-dropdown-menu-item > & > .anticon:first-child {\n    margin-right: 0;\n    vertical-align: 0;\n  }\n`;\n\nexport const useExploreAdditionalActionsMenu = (\n  latestQueryFormData,\n  canDownloadCSV,\n  slice,\n  onOpenInEditor,\n  onOpenPropertiesModal,\n  ownState,\n  dashboards,\n) => {\n  const theme = useTheme();\n  const { addDangerToast, addSuccessToast } = useToasts();\n  const [showReportSubMenu, setShowReportSubMenu] = useState(null);\n  const [isDropdownVisible, setIsDropdownVisible] = useState(false);\n  const [openSubmenus, setOpenSubmenus] = useState([]);\n  const chart = useSelector(\n    state => state.charts?.[getChartKey(state.explore)],\n  );\n\n  const { datasource } = latestQueryFormData;\n\n  const shareByEmail = useCallback(async () => {\n    try {\n      const subject = t('Superset Chart');\n      const url = await getChartPermalink(latestQueryFormData);\n      const body = encodeURIComponent(t('%s%s', 'Check out this chart: ', url));\n      window.location.href = `mailto:?Subject=${subject}%20&Body=${body}`;\n    } catch (error) {\n      addDangerToast(t('Sorry, something went wrong. Try again later.'));\n    }\n  }, [addDangerToast, latestQueryFormData]);\n\n  const exportCSV = useCallback(\n    () =>\n      canDownloadCSV\n        ? exportChart({\n            formData: latestQueryFormData,\n            ownState,\n            resultType: 'full',\n            resultFormat: 'csv',\n          })\n        : null,\n    [canDownloadCSV, latestQueryFormData],\n  );\n\n  const exportCSVPivoted = useCallback(\n    () =>\n      canDownloadCSV\n        ? exportChart({\n            formData: latestQueryFormData,\n            resultType: 'post_processed',\n            resultFormat: 'csv',\n          })\n        : null,\n    [canDownloadCSV, latestQueryFormData],\n  );\n\n  const exportJson = useCallback(\n    () =>\n      exportChart({\n        formData: latestQueryFormData,\n        resultType: 'results',\n        resultFormat: 'json',\n      }),\n    [latestQueryFormData],\n  );\n\n  const exportExcel = useCallback(\n    () =>\n      exportChart({\n        formData: latestQueryFormData,\n        resultType: 'results',\n        resultFormat: 'xlsx',\n      }),\n    [latestQueryFormData],\n  );\n\n  const copyLink = useCallback(async () => {\n    try {\n      if (!latestQueryFormData) {\n        throw new Error();\n      }\n      await copyTextToClipboard(() => getChartPermalink(latestQueryFormData));\n      addSuccessToast(t('Copied to clipboard!'));\n    } catch (error) {\n      addDangerToast(t('Sorry, something went wrong. Try again later.'));\n    }\n  }, [addDangerToast, addSuccessToast, latestQueryFormData]);\n\n  const handleMenuClick = useCallback(\n    ({ key, domEvent }) => {\n      switch (key) {\n        case MENU_KEYS.EDIT_PROPERTIES:\n          onOpenPropertiesModal();\n          setIsDropdownVisible(false);\n          break;\n        case MENU_KEYS.EXPORT_TO_CSV:\n          exportCSV();\n          setIsDropdownVisible(false);\n          setOpenSubmenus([]);\n          break;\n        case MENU_KEYS.EXPORT_TO_CSV_PIVOTED:\n          exportCSVPivoted();\n          setIsDropdownVisible(false);\n          setOpenSubmenus([]);\n          break;\n        case MENU_KEYS.EXPORT_TO_JSON:\n          exportJson();\n          setIsDropdownVisible(false);\n          setOpenSubmenus([]);\n\n          break;\n        case MENU_KEYS.EXPORT_TO_XLSX:\n          exportExcel();\n          setIsDropdownVisible(false);\n          setOpenSubmenus([]);\n          break;\n        case MENU_KEYS.DOWNLOAD_AS_IMAGE:\n          downloadAsImage(\n            '.panel-body .chart-container',\n            // eslint-disable-next-line camelcase\n            slice?.slice_name ?? t('New chart'),\n            true,\n          )(domEvent);\n          setIsDropdownVisible(false);\n          setOpenSubmenus([]);\n          break;\n        case MENU_KEYS.COPY_PERMALINK:\n          copyLink();\n          setIsDropdownVisible(false);\n          setOpenSubmenus([]);\n          break;\n        case MENU_KEYS.EMBED_CODE:\n          setIsDropdownVisible(false);\n          setOpenSubmenus([]);\n          break;\n        case MENU_KEYS.SHARE_BY_EMAIL:\n          shareByEmail();\n          setIsDropdownVisible(false);\n          setOpenSubmenus([]);\n          break;\n        case MENU_KEYS.VIEW_QUERY:\n          setIsDropdownVisible(false);\n          break;\n        case MENU_KEYS.RUN_IN_SQL_LAB:\n          onOpenInEditor(latestQueryFormData);\n          setIsDropdownVisible(false);\n          break;\n        default:\n          break;\n      }\n    },\n    [\n      copyLink,\n      exportCSV,\n      exportCSVPivoted,\n      exportJson,\n      latestQueryFormData,\n      onOpenInEditor,\n      onOpenPropertiesModal,\n      shareByEmail,\n      slice?.slice_name,\n    ],\n  );\n\n  const menu = useMemo(\n    () => (\n      <Menu\n        onClick={handleMenuClick}\n        selectable={false}\n        openKeys={openSubmenus}\n        onOpenChange={setOpenSubmenus}\n      >\n        <>\n          {slice && (\n            <Menu.Item key={MENU_KEYS.EDIT_PROPERTIES}>\n              {t('Edit chart properties')}\n            </Menu.Item>\n          )}\n          <Menu.SubMenu\n            title={t('Dashboards added to')}\n            key={MENU_KEYS.DASHBOARDS_ADDED_TO}\n          >\n            <DashboardsSubMenu\n              chartId={slice?.slice_id}\n              dashboards={dashboards}\n            />\n          </Menu.SubMenu>\n          <Menu.Divider />\n        </>\n        <Menu.SubMenu title={t('Download')} key={MENU_KEYS.DOWNLOAD_SUBMENU}>\n          {VIZ_TYPES_PIVOTABLE.includes(latestQueryFormData.viz_type) ? (\n            <>\n              <Menu.Item\n                key={MENU_KEYS.EXPORT_TO_CSV}\n                icon={<Icons.FileOutlined css={iconReset} />}\n                disabled={!canDownloadCSV}\n              >\n                {t('Export to original .CSV')}\n              </Menu.Item>\n              <Menu.Item\n                key={MENU_KEYS.EXPORT_TO_CSV_PIVOTED}\n                icon={<Icons.FileOutlined css={iconReset} />}\n                disabled={!canDownloadCSV}\n              >\n                {t('Export to pivoted .CSV')}\n              </Menu.Item>\n            </>\n          ) : (\n            <Menu.Item\n              key={MENU_KEYS.EXPORT_TO_CSV}\n              icon={<Icons.FileOutlined css={iconReset} />}\n              disabled={!canDownloadCSV}\n            >\n              {t('Export to .CSV')}\n            </Menu.Item>\n          )}\n          <Menu.Item\n            key={MENU_KEYS.EXPORT_TO_JSON}\n            icon={<Icons.FileOutlined css={iconReset} />}\n          >\n            {t('Export to .JSON')}\n          </Menu.Item>\n          <Menu.Item\n            key={MENU_KEYS.DOWNLOAD_AS_IMAGE}\n            icon={<Icons.FileImageOutlined css={iconReset} />}\n          >\n            {t('Download as image')}\n          </Menu.Item>\n          <Menu.Item\n            key={MENU_KEYS.EXPORT_TO_XLSX}\n            icon={<Icons.FileOutlined css={iconReset} />}\n          >\n            {t('Export to Excel')}\n          </Menu.Item>\n        </Menu.SubMenu>\n        <Menu.SubMenu title={t('Share')} key={MENU_KEYS.SHARE_SUBMENU}>\n          <Menu.Item key={MENU_KEYS.COPY_PERMALINK}>\n            {t('Copy permalink to clipboard')}\n          </Menu.Item>\n          <Menu.Item key={MENU_KEYS.SHARE_BY_EMAIL}>\n            {t('Share chart by email')}\n          </Menu.Item>\n          {isFeatureEnabled(FeatureFlag.EMBEDDABLE_CHARTS) ? (\n            <Menu.Item key={MENU_KEYS.EMBED_CODE}>\n              <ModalTrigger\n                triggerNode={\n                  <span data-test=\"embed-code-button\">{t('Embed code')}</span>\n                }\n                modalTitle={t('Embed code')}\n                modalBody={\n                  <EmbedCodeContent\n                    formData={latestQueryFormData}\n                    addDangerToast={addDangerToast}\n                  />\n                }\n                maxWidth={`${theme.gridUnit * 100}px`}\n                destroyOnClose\n                responsive\n              />\n            </Menu.Item>\n          ) : null}\n        </Menu.SubMenu>\n        <Menu.Divider />\n        {showReportSubMenu ? (\n          <>\n            <Menu.SubMenu title={t('Manage email report')}>\n              <HeaderReportDropDown\n                chart={chart}\n                setShowReportSubMenu={setShowReportSubMenu}\n                showReportSubMenu={showReportSubMenu}\n                setIsDropdownVisible={setIsDropdownVisible}\n                isDropdownVisible={isDropdownVisible}\n                useTextMenu\n              />\n            </Menu.SubMenu>\n            <Menu.Divider />\n          </>\n        ) : (\n          <Menu>\n            <HeaderReportDropDown\n              chart={chart}\n              setShowReportSubMenu={setShowReportSubMenu}\n              setIsDropdownVisible={setIsDropdownVisible}\n              isDropdownVisible={isDropdownVisible}\n              useTextMenu\n            />\n          </Menu>\n        )}\n        <Menu.Item key={MENU_KEYS.VIEW_QUERY}>\n          <ModalTrigger\n            triggerNode={\n              <span data-test=\"view-query-menu-item\">{t('View query')}</span>\n            }\n            modalTitle={t('View query')}\n            modalBody={\n              <ViewQueryModal latestQueryFormData={latestQueryFormData} />\n            }\n            draggable\n            resizable\n            responsive\n          />\n        </Menu.Item>\n        {datasource && (\n          <Menu.Item key={MENU_KEYS.RUN_IN_SQL_LAB}>\n            {t('Run in SQL Lab')}\n          </Menu.Item>\n        )}\n      </Menu>\n    ),\n    [\n      addDangerToast,\n      canDownloadCSV,\n      chart,\n      dashboards,\n      handleMenuClick,\n      isDropdownVisible,\n      latestQueryFormData,\n      openSubmenus,\n      showReportSubMenu,\n      slice,\n      theme.gridUnit,\n    ],\n  );\n  return [menu, isDropdownVisible, setIsDropdownVisible];\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { BOOL_FALSE_DISPLAY, BOOL_TRUE_DISPLAY } from 'src/constants';\n\nexport interface BooleanCellProps {\n  value?: boolean;\n}\n\nfunction BooleanCell({ value }: BooleanCellProps) {\n  return <span>{value ? BOOL_TRUE_DISPLAY : BOOL_FALSE_DISPLAY}</span>;\n}\n\nexport default BooleanCell;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { css, SupersetTheme } from '@superset-ui/core';\nimport { NULL_DISPLAY } from 'src/constants';\n\nfunction NullCell() {\n  return (\n    <span\n      css={(theme: SupersetTheme) =>\n        css`\n          color: ${theme.colors.grayscale.light1};\n        `\n      }\n    >\n      {NULL_DISPLAY}\n    </span>\n  );\n}\n\nexport default NullCell;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { getTimeFormatter, TimeFormats } from '@superset-ui/core';\nimport NullCell from '../NullCell';\n\nexport interface TimeCellProps {\n  format?: string;\n  value?: number | Date;\n}\n\nfunction TimeCell({\n  format = TimeFormats.DATABASE_DATETIME,\n  value,\n}: TimeCellProps) {\n  if (value) {\n    return <span>{getTimeFormatter(format).format(value)}</span>;\n  }\n  return <NullCell />;\n}\n\nexport default TimeCell;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState } from 'react';\nimport { css, useTheme } from '@superset-ui/core';\nimport { Radio } from 'src/components/Radio';\nimport { Space } from 'src/components';\nimport Icons from 'src/components/Icons';\nimport Popover from 'src/components/Popover';\n\nexport interface HeaderWithRadioGroupProps {\n  headerTitle: string;\n  groupTitle: string;\n  groupOptions: { label: string; value: string | number }[];\n  value?: string | number;\n  onChange: (value: string) => void;\n}\n\nfunction HeaderWithRadioGroup(props: HeaderWithRadioGroupProps) {\n  const { headerTitle, groupTitle, groupOptions, value, onChange } = props;\n  const theme = useTheme();\n  const [popoverVisible, setPopoverVisible] = useState(false);\n\n  return (\n    <div\n      css={css`\n        display: flex;\n        align-items: center;\n      `}\n    >\n      <Popover\n        trigger=\"click\"\n        visible={popoverVisible}\n        content={\n          <div>\n            <div\n              css={css`\n                font-weight: ${theme.typography.weights.bold};\n                margin-bottom: ${theme.gridUnit}px;\n              `}\n            >\n              {groupTitle}\n            </div>\n            <Radio.Group\n              value={value}\n              onChange={e => {\n                onChange(e.target.value);\n                setPopoverVisible(false);\n              }}\n            >\n              <Space direction=\"vertical\">\n                {groupOptions.map(option => (\n                  <Radio key={option.value} value={option.value}>\n                    {option.label}\n                  </Radio>\n                ))}\n              </Space>\n            </Radio.Group>\n          </div>\n        }\n        placement=\"bottomLeft\"\n        arrowPointAtCenter\n      >\n        <Icons.SettingOutlined\n          iconSize=\"m\"\n          iconColor={theme.colors.grayscale.light1}\n          css={css`\n            margin-top: 3px; // we need exactly 3px to align the icon\n            margin-right: ${theme.gridUnit}px;\n          `}\n          onClick={() => setPopoverVisible(true)}\n        />\n      </Popover>\n      {headerTitle}\n    </div>\n  );\n}\n\nexport default HeaderWithRadioGroup;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { useCallback, useMemo } from 'react';\nimport { Tag } from 'antd';\nimport {\n  BinaryQueryObjectFilterClause,\n  css,\n  isAdhocColumn,\n  t,\n  useTheme,\n} from '@superset-ui/core';\nimport RowCountLabel from 'src/explore/components/RowCountLabel';\nimport Icons from 'src/components/Icons';\n\nexport default function TableControls({\n  filters,\n  setFilters,\n  totalCount,\n  loading,\n  onReload,\n}: {\n  filters: BinaryQueryObjectFilterClause[];\n  setFilters: (filters: BinaryQueryObjectFilterClause[]) => void;\n  totalCount?: number;\n  loading: boolean;\n  onReload: () => void;\n}) {\n  const theme = useTheme();\n  const filterMap: Record<string, BinaryQueryObjectFilterClause> = useMemo(\n    () =>\n      Object.assign(\n        {},\n        ...filters.map(filter => ({\n          [isAdhocColumn(filter.col)\n            ? (filter.col.label as string)\n            : filter.col]: filter,\n        })),\n      ),\n    [filters],\n  );\n\n  const removeFilter = useCallback(\n    colName => {\n      const updatedFilterMap = { ...filterMap };\n      delete updatedFilterMap[colName];\n      setFilters([...Object.values(updatedFilterMap)]);\n    },\n    [filterMap, setFilters],\n  );\n\n  const filterTags = useMemo(\n    () =>\n      Object.entries(filterMap)\n        .map(([colName, { val, formattedVal }]) => ({\n          colName,\n          val: formattedVal ?? val,\n        }))\n        .sort((a, b) => a.colName.localeCompare(b.colName)),\n    [filterMap],\n  );\n\n  return (\n    <div\n      css={css`\n        display: flex;\n        justify-content: space-between;\n        padding: ${theme.gridUnit / 2}px 0;\n        margin-bottom: ${theme.gridUnit * 2}px;\n      `}\n    >\n      <div\n        css={css`\n          display: flex;\n          flex-wrap: wrap;\n          margin-bottom: -${theme.gridUnit * 4}px;\n        `}\n      >\n        {filterTags.map(({ colName, val }) => (\n          <Tag\n            closable\n            onClose={removeFilter.bind(null, colName)}\n            key={colName}\n            css={css`\n              height: ${theme.gridUnit * 6}px;\n              display: flex;\n              align-items: center;\n              padding: ${theme.gridUnit / 2}px ${theme.gridUnit * 2}px;\n              margin-right: ${theme.gridUnit * 4}px;\n              margin-bottom: ${theme.gridUnit * 4}px;\n              line-height: 1.2;\n            `}\n            data-test=\"filter-col\"\n          >\n            <span\n              css={css`\n                margin-right: ${theme.gridUnit}px;\n              `}\n            >\n              {colName}\n            </span>\n            <strong data-test=\"filter-val\">{val}</strong>\n          </Tag>\n        ))}\n      </div>\n      <div\n        css={css`\n          display: flex;\n          align-items: center;\n          height: min-content;\n        `}\n      >\n        <RowCountLabel loading={loading && !totalCount} rowcount={totalCount} />\n        <Icons.ReloadOutlined\n          iconColor={theme.colors.grayscale.light1}\n          iconSize=\"l\"\n          aria-label={t('Reload')}\n          role=\"button\"\n          onClick={onReload}\n        />\n      </div>\n    </div>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, {\n  useState,\n  useEffect,\n  useMemo,\n  useCallback,\n  useRef,\n  ReactElement,\n} from 'react';\nimport { useSelector } from 'react-redux';\nimport {\n  BinaryQueryObjectFilterClause,\n  css,\n  ensureIsArray,\n  t,\n  useTheme,\n  QueryFormData,\n  JsonObject,\n  GenericDataType,\n} from '@superset-ui/core';\nimport { useResizeDetector } from 'react-resize-detector';\nimport Loading from 'src/components/Loading';\nimport BooleanCell from 'src/components/Table/cell-renderers/BooleanCell';\nimport NullCell from 'src/components/Table/cell-renderers/NullCell';\nimport TimeCell from 'src/components/Table/cell-renderers/TimeCell';\nimport { EmptyStateMedium } from 'src/components/EmptyState';\nimport { getDatasourceSamples } from 'src/components/Chart/chartAction';\nimport Table, {\n  ColumnsType,\n  TablePaginationConfig,\n  TableSize,\n} from 'src/components/Table';\nimport MetadataBar, {\n  ContentType,\n  MetadataType,\n} from 'src/components/MetadataBar';\nimport Alert from 'src/components/Alert';\nimport { useApiV1Resource } from 'src/hooks/apiResources';\nimport HeaderWithRadioGroup from 'src/components/Table/header-renderers/HeaderWithRadioGroup';\nimport TableControls from './DrillDetailTableControls';\nimport { getDrillPayload } from './utils';\nimport { Dataset, ResultsPage } from './types';\n\nconst PAGE_SIZE = 50;\n\ninterface DataType {\n  [key: string]: any;\n}\n\n// Must be outside of the main component due to problems in\n// react-resize-detector with conditional rendering\n// https://github.com/maslianok/react-resize-detector/issues/178\nfunction Resizable({ children }: { children: ReactElement }) {\n  const { ref, height } = useResizeDetector();\n  return (\n    <div ref={ref} css={{ flex: 1 }}>\n      {React.cloneElement(children, { height })}\n    </div>\n  );\n}\n\nenum TimeFormatting {\n  Original,\n  Formatted,\n}\n\nexport default function DrillDetailPane({\n  formData,\n  initialFilters,\n}: {\n  formData: QueryFormData;\n  initialFilters: BinaryQueryObjectFilterClause[];\n}) {\n  const theme = useTheme();\n  const [pageIndex, setPageIndex] = useState(0);\n  const lastPageIndex = useRef(pageIndex);\n  const [filters, setFilters] = useState(initialFilters);\n  const [isLoading, setIsLoading] = useState(false);\n  const [responseError, setResponseError] = useState('');\n  const [resultsPages, setResultsPages] = useState<Map<number, ResultsPage>>(\n    new Map(),\n  );\n  const [timeFormatting, setTimeFormatting] = useState({});\n\n  const SAMPLES_ROW_LIMIT = useSelector(\n    (state: { common: { conf: JsonObject } }) =>\n      state.common.conf.SAMPLES_ROW_LIMIT,\n  );\n\n  // Extract datasource ID/type from string ID\n  const [datasourceId, datasourceType] = useMemo(\n    () => formData.datasource.split('__'),\n    [formData.datasource],\n  );\n\n  // Get page of results\n  const resultsPage = useMemo(() => {\n    const nextResultsPage = resultsPages.get(pageIndex);\n    if (nextResultsPage) {\n      lastPageIndex.current = pageIndex;\n      return nextResultsPage;\n    }\n\n    return resultsPages.get(lastPageIndex.current);\n  }, [pageIndex, resultsPages]);\n\n  const mappedColumns: ColumnsType<DataType> = useMemo(\n    () =>\n      resultsPage?.colNames.map((column, index) => ({\n        key: column,\n        dataIndex: column,\n        title:\n          resultsPage?.colTypes[index] === GenericDataType.TEMPORAL ? (\n            <HeaderWithRadioGroup\n              headerTitle={column}\n              groupTitle={t('Formatting')}\n              groupOptions={[\n                { label: t('Original value'), value: TimeFormatting.Original },\n                {\n                  label: t('Formatted value'),\n                  value: TimeFormatting.Formatted,\n                },\n              ]}\n              value={\n                timeFormatting[column] === TimeFormatting.Original\n                  ? TimeFormatting.Original\n                  : TimeFormatting.Formatted\n              }\n              onChange={value =>\n                setTimeFormatting(state => ({ ...state, [column]: value }))\n              }\n            />\n          ) : (\n            column\n          ),\n        render: value => {\n          if (value === true || value === false) {\n            return <BooleanCell value={value} />;\n          }\n          if (value === null) {\n            return <NullCell />;\n          }\n          if (\n            resultsPage?.colTypes[index] === GenericDataType.TEMPORAL &&\n            timeFormatting[column] !== TimeFormatting.Original &&\n            (typeof value === 'number' || value instanceof Date)\n          ) {\n            return <TimeCell value={value} />;\n          }\n          return String(value);\n        },\n        width: 150,\n      })) || [],\n    [resultsPage?.colNames, resultsPage?.colTypes, timeFormatting],\n  );\n\n  const data: DataType[] = useMemo(\n    () =>\n      resultsPage?.data.map((row, index) =>\n        resultsPage?.colNames.reduce(\n          (acc, curr) => ({ ...acc, [curr]: row[curr] }),\n          {\n            key: index,\n          },\n        ),\n      ) || [],\n    [resultsPage?.colNames, resultsPage?.data],\n  );\n\n  // Clear cache on reload button click\n  const handleReload = useCallback(() => {\n    setResponseError('');\n    setResultsPages(new Map());\n    setPageIndex(0);\n  }, []);\n\n  // Clear cache and reset page index if filters change\n  useEffect(() => {\n    setResponseError('');\n    setResultsPages(new Map());\n    setPageIndex(0);\n  }, [filters]);\n\n  // Update cache order if page in cache\n  useEffect(() => {\n    if (\n      resultsPages.has(pageIndex) &&\n      [...resultsPages.keys()].at(-1) !== pageIndex\n    ) {\n      const nextResultsPages = new Map(resultsPages);\n      nextResultsPages.delete(pageIndex);\n      setResultsPages(\n        nextResultsPages.set(\n          pageIndex,\n          resultsPages.get(pageIndex) as ResultsPage,\n        ),\n      );\n    }\n  }, [pageIndex, resultsPages]);\n\n  // Download page of results & trim cache if page not in cache\n  useEffect(() => {\n    if (!responseError && !isLoading && !resultsPages.has(pageIndex)) {\n      setIsLoading(true);\n      const jsonPayload = getDrillPayload(formData, filters) ?? {};\n      const cachePageLimit = Math.ceil(SAMPLES_ROW_LIMIT / PAGE_SIZE);\n      getDatasourceSamples(\n        datasourceType,\n        datasourceId,\n        false,\n        jsonPayload,\n        PAGE_SIZE,\n        pageIndex + 1,\n      )\n        .then(response => {\n          setResultsPages(\n            new Map([\n              ...[...resultsPages.entries()].slice(-cachePageLimit + 1),\n              [\n                pageIndex,\n                {\n                  total: response.total_count,\n                  data: response.data,\n                  colNames: ensureIsArray(response.colnames),\n                  colTypes: ensureIsArray(response.coltypes),\n                },\n              ],\n            ]),\n          );\n          setResponseError('');\n        })\n        .catch(error => {\n          setResponseError(`${error.name}: ${error.message}`);\n        })\n        .finally(() => {\n          setIsLoading(false);\n        });\n    }\n  }, [\n    SAMPLES_ROW_LIMIT,\n    datasourceId,\n    datasourceType,\n    filters,\n    formData,\n    isLoading,\n    pageIndex,\n    responseError,\n    resultsPages,\n  ]);\n\n  // Get datasource metadata\n  const response = useApiV1Resource<Dataset>(`/api/v1/dataset/${datasourceId}`);\n\n  const bootstrapping =\n    (!responseError && !resultsPages.size) || response.status === 'loading';\n\n  let tableContent = null;\n  if (responseError) {\n    // Render error if page download failed\n    tableContent = (\n      <pre\n        css={css`\n          margin-top: ${theme.gridUnit * 4}px;\n        `}\n      >\n        {responseError}\n      </pre>\n    );\n  } else if (bootstrapping) {\n    // Render loading if first page hasn't loaded\n    tableContent = <Loading />;\n  } else if (resultsPage?.total === 0) {\n    // Render empty state if no results are returned for page\n    const title = t('No rows were returned for this dataset');\n    tableContent = <EmptyStateMedium image=\"document.svg\" title={title} />;\n  } else {\n    // Render table if at least one page has successfully loaded\n    tableContent = (\n      <Resizable>\n        <Table\n          data={data}\n          columns={mappedColumns}\n          size={TableSize.SMALL}\n          defaultPageSize={PAGE_SIZE}\n          recordCount={resultsPage?.total}\n          usePagination\n          loading={isLoading}\n          onChange={(pagination: TablePaginationConfig) =>\n            setPageIndex(pagination.current ? pagination.current - 1 : 0)\n          }\n          resizable\n          virtualize\n        />\n      </Resizable>\n    );\n  }\n\n  const metadata = useMemo(() => {\n    const { status, result } = response;\n    const items: ContentType[] = [];\n    if (result) {\n      const {\n        changed_on_humanized,\n        created_on_humanized,\n        description,\n        table_name,\n        changed_by,\n        created_by,\n        owners,\n      } = result;\n      const notAvailable = t('Not available');\n      const createdBy =\n        `${created_by?.first_name ?? ''} ${\n          created_by?.last_name ?? ''\n        }`.trim() || notAvailable;\n      const modifiedBy = changed_by\n        ? `${changed_by.first_name} ${changed_by.last_name}`\n        : notAvailable;\n      const formattedOwners =\n        owners.length > 0\n          ? owners.map(owner => `${owner.first_name} ${owner.last_name}`)\n          : [notAvailable];\n      items.push({\n        type: MetadataType.TABLE,\n        title: table_name,\n      });\n      items.push({\n        type: MetadataType.LAST_MODIFIED,\n        value: changed_on_humanized,\n        modifiedBy,\n      });\n      items.push({\n        type: MetadataType.OWNER,\n        createdBy,\n        owners: formattedOwners,\n        createdOn: created_on_humanized,\n      });\n      if (description) {\n        items.push({\n          type: MetadataType.DESCRIPTION,\n          value: description,\n        });\n      }\n    }\n    return (\n      <div\n        css={css`\n          display: flex;\n          margin-bottom: ${theme.gridUnit * 4}px;\n        `}\n      >\n        {status === 'complete' && (\n          <MetadataBar items={items} tooltipPlacement=\"bottom\" />\n        )}\n        {status === 'error' && (\n          <Alert\n            type=\"error\"\n            message={t('There was an error loading the dataset metadata')}\n          />\n        )}\n      </div>\n    );\n  }, [response, theme.gridUnit]);\n\n  return (\n    <>\n      {!bootstrapping && metadata}\n      {!bootstrapping && (\n        <TableControls\n          filters={filters}\n          setFilters={setFilters}\n          totalCount={resultsPage?.total}\n          loading={isLoading}\n          onReload={handleReload}\n        />\n      )}\n      {tableContent}\n    </>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { omit } from 'lodash';\nimport {\n  ensureIsArray,\n  QueryFormData,\n  BinaryQueryObjectFilterClause,\n  buildQueryObject,\n} from '@superset-ui/core';\n\nexport function getDrillPayload(\n  queryFormData?: QueryFormData,\n  drillFilters?: BinaryQueryObjectFilterClause[],\n) {\n  if (!queryFormData) {\n    return undefined;\n  }\n  const queryObject = buildQueryObject(queryFormData);\n  const extras = omit(queryObject.extras, 'having');\n  const filters = [\n    ...ensureIsArray(queryObject.filters),\n    ...ensureIsArray(drillFilters).map(f => omit(f, 'formattedVal')),\n  ];\n  return {\n    granularity: queryObject.granularity,\n    time_range: queryObject.time_range,\n    filters,\n    extras,\n  };\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { useCallback, useContext, useMemo } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport {\n  BinaryQueryObjectFilterClause,\n  css,\n  QueryFormData,\n  t,\n  useTheme,\n} from '@superset-ui/core';\nimport Modal from 'src/components/Modal';\nimport Button from 'src/components/Button';\nimport { useSelector } from 'react-redux';\nimport { DashboardPageIdContext } from 'src/dashboard/containers/DashboardPage';\nimport { Slice } from 'src/types/Chart';\nimport DrillDetailPane from './DrillDetailPane';\n\ninterface ModalFooterProps {\n  exploreChart: () => void;\n  closeModal?: () => void;\n}\n\nconst ModalFooter = ({ exploreChart, closeModal }: ModalFooterProps) => (\n  <>\n    <Button buttonStyle=\"secondary\" buttonSize=\"small\" onClick={exploreChart}>\n      {t('Edit chart')}\n    </Button>\n    <Button\n      buttonStyle=\"primary\"\n      buttonSize=\"small\"\n      onClick={closeModal}\n      data-test=\"close-drilltodetail-modal\"\n    >\n      {t('Close')}\n    </Button>\n  </>\n);\n\ninterface DrillDetailModalProps {\n  chartId: number;\n  formData: QueryFormData;\n  initialFilters: BinaryQueryObjectFilterClause[];\n  showModal: boolean;\n  onHideModal: () => void;\n}\n\nexport default function DrillDetailModal({\n  chartId,\n  formData,\n  initialFilters,\n  showModal,\n  onHideModal,\n}: DrillDetailModalProps) {\n  const theme = useTheme();\n  const history = useHistory();\n  const dashboardPageId = useContext(DashboardPageIdContext);\n  const { slice_name: chartName } = useSelector(\n    (state: { sliceEntities: { slices: Record<number, Slice> } }) =>\n      state.sliceEntities.slices[chartId],\n  );\n\n  const exploreUrl = useMemo(\n    () => `/explore/?dashboard_page_id=${dashboardPageId}&slice_id=${chartId}`,\n    [chartId, dashboardPageId],\n  );\n\n  const exploreChart = useCallback(() => {\n    history.push(exploreUrl);\n  }, [exploreUrl, history]);\n\n  return (\n    <Modal\n      show={showModal}\n      onHide={onHideModal ?? (() => null)}\n      css={css`\n        .ant-modal-body {\n          display: flex;\n          flex-direction: column;\n        }\n      `}\n      title={t('Drill to detail: %s', chartName)}\n      footer={<ModalFooter exploreChart={exploreChart} />}\n      responsive\n      resizable\n      resizableConfig={{\n        minHeight: theme.gridUnit * 128,\n        minWidth: theme.gridUnit * 128,\n        defaultSize: {\n          width: 'auto',\n          height: '75vh',\n        },\n      }}\n      draggable\n      destroyOnClose\n      maskClosable={false}\n    >\n      <DrillDetailPane formData={formData} initialFilters={initialFilters} />\n    </Modal>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { ReactNode, useCallback, useMemo, useState } from 'react';\nimport { isEmpty } from 'lodash';\nimport {\n  Behavior,\n  BinaryQueryObjectFilterClause,\n  css,\n  extractQueryFields,\n  getChartMetadataRegistry,\n  QueryFormData,\n  styled,\n  SupersetTheme,\n  t,\n} from '@superset-ui/core';\nimport { Menu } from 'src/components/Menu';\nimport Icons from 'src/components/Icons';\nimport { Tooltip } from 'src/components/Tooltip';\nimport DrillDetailModal from './DrillDetailModal';\nimport { getMenuAdjustedY, MENU_ITEM_HEIGHT } from '../utils';\n\nconst MENU_PADDING = 4;\nconst DRILL_TO_DETAIL_TEXT = t('Drill to detail by');\n\nconst DisabledMenuItemTooltip = ({ title }: { title: ReactNode }) => (\n  <Tooltip title={title} placement=\"top\">\n    <Icons.InfoCircleOutlined\n      data-test=\"tooltip-trigger\"\n      css={(theme: SupersetTheme) => css`\n        color: ${theme.colors.text.label};\n        margin-left: ${theme.gridUnit * 2}px;\n        &.anticon {\n          font-size: unset;\n          .anticon {\n            line-height: unset;\n            vertical-align: unset;\n          }\n        }\n      `}\n    />\n  </Tooltip>\n);\n\nconst DisabledMenuItem = ({ children, ...props }: { children: ReactNode }) => (\n  <Menu.Item disabled {...props}>\n    <div\n      css={css`\n        white-space: normal;\n        max-width: 160px;\n      `}\n    >\n      {children}\n    </div>\n  </Menu.Item>\n);\n\nconst Filter = styled.span`\n  ${({ theme }) => `\n     font-weight: ${theme.typography.weights.bold};\n     color: ${theme.colors.primary.base};\n   `}\n`;\n\nexport type DrillDetailMenuItemsProps = {\n  chartId: number;\n  formData: QueryFormData;\n  filters?: BinaryQueryObjectFilterClause[];\n  isContextMenu?: boolean;\n  contextMenuY?: number;\n  onSelection?: () => void;\n  onClick?: (event: MouseEvent) => void;\n};\n\nconst DrillDetailMenuItems = ({\n  chartId,\n  formData,\n  filters = [],\n  isContextMenu = false,\n  contextMenuY = 0,\n  onSelection = () => null,\n  onClick = () => null,\n  ...props\n}: DrillDetailMenuItemsProps) => {\n  const [modalFilters, setFilters] = useState<BinaryQueryObjectFilterClause[]>(\n    [],\n  );\n\n  const [showModal, setShowModal] = useState(false);\n  const openModal = useCallback(\n    (filters, event) => {\n      onClick(event);\n      onSelection();\n      setFilters(filters);\n      setShowModal(true);\n    },\n    [onClick, onSelection],\n  );\n\n  const closeModal = useCallback(() => {\n    setShowModal(false);\n  }, []);\n\n  // Check for Behavior.DRILL_TO_DETAIL to tell if plugin handles the `contextmenu`\n  // event for dimensions.  If it doesn't, tell the user that drill to detail by\n  // dimension is not supported.  If it does, and the `contextmenu` handler didn't\n  // pass any filters, tell the user that they didn't select a dimension.\n  const handlesDimensionContextMenu = useMemo(\n    () =>\n      getChartMetadataRegistry()\n        .get(formData.viz_type)\n        ?.behaviors.find(behavior => behavior === Behavior.DRILL_TO_DETAIL),\n    [formData.viz_type],\n  );\n\n  // Check metrics to see if chart's current configuration lacks\n  // aggregations, in which case Drill to Detail should be disabled.\n  const noAggregations = useMemo(() => {\n    const { metrics } = extractQueryFields(formData);\n    return isEmpty(metrics);\n  }, [formData]);\n\n  let drillToDetailMenuItem;\n  if (handlesDimensionContextMenu && noAggregations) {\n    drillToDetailMenuItem = (\n      <DisabledMenuItem {...props} key=\"drill-detail-no-aggregations\">\n        {t('Drill to detail')}\n        <DisabledMenuItemTooltip\n          title={t(\n            'Drill to detail is disabled because this chart does not group data by dimension value.',\n          )}\n        />\n      </DisabledMenuItem>\n    );\n  } else {\n    drillToDetailMenuItem = (\n      <Menu.Item\n        {...props}\n        key=\"drill-detail-no-filters\"\n        onClick={openModal.bind(null, [])}\n      >\n        {t('Drill to detail')}\n      </Menu.Item>\n    );\n  }\n\n  let drillToDetailByMenuItem;\n  if (!handlesDimensionContextMenu) {\n    drillToDetailByMenuItem = (\n      <DisabledMenuItem {...props} key=\"drill-detail-by-chart-not-supported\">\n        {DRILL_TO_DETAIL_TEXT}\n        <DisabledMenuItemTooltip\n          title={t(\n            'Drill to detail by value is not yet supported for this chart type.',\n          )}\n        />\n      </DisabledMenuItem>\n    );\n  }\n\n  if (handlesDimensionContextMenu && noAggregations) {\n    drillToDetailByMenuItem = (\n      <DisabledMenuItem {...props} key=\"drill-detail-by-no-aggregations\">\n        {DRILL_TO_DETAIL_TEXT}\n      </DisabledMenuItem>\n    );\n  }\n\n  // Ensure submenu doesn't appear offscreen\n  const submenuYOffset = useMemo(() => {\n    const itemsCount = filters.length > 1 ? filters.length + 1 : filters.length;\n    const submenuY =\n      contextMenuY + MENU_PADDING + MENU_ITEM_HEIGHT + MENU_PADDING;\n\n    return getMenuAdjustedY(submenuY, itemsCount) - submenuY;\n  }, [contextMenuY, filters.length]);\n\n  if (handlesDimensionContextMenu && !noAggregations && filters?.length) {\n    drillToDetailByMenuItem = (\n      <Menu.SubMenu\n        {...props}\n        popupOffset={[0, submenuYOffset]}\n        title={DRILL_TO_DETAIL_TEXT}\n      >\n        <div data-test=\"drill-to-detail-by-submenu\">\n          {filters.map((filter, i) => (\n            <Menu.Item\n              {...props}\n              key={`drill-detail-filter-${i}`}\n              onClick={openModal.bind(null, [filter])}\n            >\n              {`${DRILL_TO_DETAIL_TEXT} `}\n              <Filter>{filter.formattedVal}</Filter>\n            </Menu.Item>\n          ))}\n          {filters.length > 1 && (\n            <Menu.Item\n              {...props}\n              key=\"drill-detail-filter-all\"\n              onClick={openModal.bind(null, filters)}\n            >\n              {`${DRILL_TO_DETAIL_TEXT} `}\n              <Filter>{t('all')}</Filter>\n            </Menu.Item>\n          )}\n        </div>\n      </Menu.SubMenu>\n    );\n  }\n\n  if (handlesDimensionContextMenu && !noAggregations && !filters?.length) {\n    drillToDetailByMenuItem = (\n      <DisabledMenuItem {...props} key=\"drill-detail-by-select-aggregation\">\n        {DRILL_TO_DETAIL_TEXT}\n        <DisabledMenuItemTooltip\n          title={t(\n            'Right-click on a dimension value to drill to detail by that value.',\n          )}\n        />\n      </DisabledMenuItem>\n    );\n  }\n\n  return (\n    <>\n      {drillToDetailMenuItem}\n      {isContextMenu && drillToDetailByMenuItem}\n      <DrillDetailModal\n        chartId={chartId}\n        formData={formData}\n        initialFilters={modalFilters}\n        showModal={showModal}\n        onHideModal={closeModal}\n      />\n    </>\n  );\n};\n\nexport default DrillDetailMenuItems;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nexport const MENU_ITEM_HEIGHT = 32;\nconst MENU_VERTICAL_SPACING = 32;\n\n/**\n * Calculates an adjusted Y-offset for a menu or submenu to prevent that\n * menu from appearing offscreen\n *\n * @param clientY The original Y-offset\n * @param itemsCount The number of menu items\n */\nexport function getMenuAdjustedY(clientY: number, itemsCount: number) {\n  // Viewport height\n  const vh = Math.max(\n    document.documentElement.clientHeight || 0,\n    window.innerHeight || 0,\n  );\n\n  const menuHeight = MENU_ITEM_HEIGHT * itemsCount + MENU_VERTICAL_SPACING;\n  // Always show the context menu inside the viewport\n  return vh - clientY < menuHeight ? vh - menuHeight : clientY;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { ConfigProvider } from 'antd';\nimport { styled, t } from '@superset-ui/core';\nimport ReactCronPicker, { Locale, CronProps } from 'react-js-cron';\n\nexport * from 'react-js-cron';\n\nexport const LOCALE: Locale = {\n  everyText: t('every'),\n  emptyMonths: t('every month'),\n  emptyMonthDays: t('every day of the month'),\n  emptyMonthDaysShort: t('day of the month'),\n  emptyWeekDays: t('every day of the week'),\n  emptyWeekDaysShort: t('day of the week'),\n  emptyHours: t('every hour'),\n  emptyMinutes: t('every minute'),\n  emptyMinutesForHourPeriod: t('every'),\n  yearOption: t('year'),\n  monthOption: t('month'),\n  weekOption: t('week'),\n  dayOption: t('day'),\n  hourOption: t('hour'),\n  minuteOption: t('minute'),\n  rebootOption: t('reboot'),\n  prefixPeriod: t('Every'),\n  prefixMonths: t('in'),\n  prefixMonthDays: t('on'),\n  prefixWeekDays: t('on'),\n  prefixWeekDaysForMonthAndYearPeriod: t('and'),\n  prefixHours: t('at'),\n  prefixMinutes: t(':'),\n  prefixMinutesForHourPeriod: t('at'),\n  suffixMinutesForHourPeriod: t('minute(s)'),\n  errorInvalidCron: t('Invalid cron expression'),\n  clearButtonText: t('Clear'),\n  weekDays: [\n    // Order is important, the index will be used as value\n    t('Sunday'), // Sunday must always be first, it's \"0\"\n    t('Monday'),\n    t('Tuesday'),\n    t('Wednesday'),\n    t('Thursday'),\n    t('Friday'),\n    t('Saturday'),\n  ],\n  months: [\n    // Order is important, the index will be used as value\n    t('January'),\n    t('February'),\n    t('March'),\n    t('April'),\n    t('May'),\n    t('June'),\n    t('July'),\n    t('August'),\n    t('September'),\n    t('October'),\n    t('November'),\n    t('December'),\n  ],\n  // Order is important, the index will be used as value\n  altWeekDays: [\n    t('SUN'), // Sunday must always be first, it's \"0\"\n    t('MON'),\n    t('TUE'),\n    t('WED'),\n    t('THU'),\n    t('FRI'),\n    t('SAT'),\n  ],\n  // Order is important, the index will be used as value\n  altMonths: [\n    t('JAN'),\n    t('FEB'),\n    t('MAR'),\n    t('APR'),\n    t('MAY'),\n    t('JUN'),\n    t('JUL'),\n    t('AUG'),\n    t('SEP'),\n    t('OCT'),\n    t('NOV'),\n    t('DEC'),\n  ],\n};\n\nexport const CronPicker = styled((props: CronProps) => (\n  <ConfigProvider\n    getPopupContainer={trigger => trigger.parentElement as HTMLElement}\n  >\n    <ReactCronPicker locale={LOCALE} {...props} />\n  </ConfigProvider>\n))`\n  .react-js-cron-field {\n    margin-bottom: 0px;\n  }\n  .react-js-cron-select:not(.react-js-cron-custom-select) > div:first-of-type,\n  .react-js-cron-custom-select {\n    border-radius: ${({ theme }) => theme.gridUnit}px;\n    background-color: ${({ theme }) =>\n      theme.colors.grayscale.light4} !important;\n  }\n  .react-js-cron-custom-select > div:first-of-type {\n    border-radius: ${({ theme }) => theme.gridUnit}px;\n  }\n  .react-js-cron-custom-select .ant-select-selection-placeholder {\n    flex: auto;\n  }\n  .react-js-cron-custom-select .ant-select-selection-overflow-item {\n    align-self: center;\n  }\n`;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { RefObject } from 'react';\nimport { AntdDropdown } from 'src/components';\nimport { DropDownProps } from 'antd/lib/dropdown';\nimport { styled } from '@superset-ui/core';\nimport Icons from 'src/components/Icons';\n\nconst MenuDots = styled.div`\n  width: ${({ theme }) => theme.gridUnit * 0.75}px;\n  height: ${({ theme }) => theme.gridUnit * 0.75}px;\n  border-radius: 50%;\n  background-color: ${({ theme }) => theme.colors.grayscale.light1};\n\n  font-weight: ${({ theme }) => theme.typography.weights.normal};\n  display: inline-flex;\n  position: relative;\n\n  &:hover {\n    background-color: ${({ theme }) => theme.colors.primary.base};\n\n    &::before,\n    &::after {\n      background-color: ${({ theme }) => theme.colors.primary.base};\n    }\n  }\n\n  &::before,\n  &::after {\n    position: absolute;\n    content: ' ';\n    width: ${({ theme }) => theme.gridUnit * 0.75}px;\n    height: ${({ theme }) => theme.gridUnit * 0.75}px;\n    border-radius: 50%;\n    background-color: ${({ theme }) => theme.colors.grayscale.light1};\n  }\n\n  &::before {\n    top: ${({ theme }) => theme.gridUnit}px;\n  }\n\n  &::after {\n    bottom: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nconst MenuDotsWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  padding: ${({ theme }) => theme.gridUnit * 2}px;\n  padding-left: ${({ theme }) => theme.gridUnit}px;\n`;\n\nexport enum IconOrientation {\n  VERTICAL = 'vertical',\n  HORIZONTAL = 'horizontal',\n}\nexport interface DropdownProps extends DropDownProps {\n  overlay: React.ReactElement;\n  iconOrientation?: IconOrientation;\n}\n\nconst RenderIcon = (\n  iconOrientation: IconOrientation = IconOrientation.VERTICAL,\n) => {\n  const component =\n    iconOrientation === IconOrientation.HORIZONTAL ? (\n      <Icons.MoreHoriz iconSize=\"xl\" />\n    ) : (\n      <MenuDots />\n    );\n  return component;\n};\n\nexport const Dropdown = ({\n  overlay,\n  iconOrientation = IconOrientation.VERTICAL,\n  ...rest\n}: DropdownProps) => (\n  <AntdDropdown overlay={overlay} {...rest}>\n    <MenuDotsWrapper data-test=\"dropdown-trigger\">\n      {RenderIcon(iconOrientation)}\n    </MenuDotsWrapper>\n  </AntdDropdown>\n);\n\ninterface ExtendedDropDownProps extends DropDownProps {\n  ref?: RefObject<HTMLDivElement>;\n}\n\n// @z-index-below-dashboard-header (100) - 1 = 99\nexport const NoAnimationDropdown = (\n  props: ExtendedDropDownProps & { children?: React.ReactNode },\n) => (\n  <AntdDropdown\n    overlayStyle={{ zIndex: 99, animationDuration: '0s' }}\n    {...props}\n  />\n);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { ensureIsArray, styled, t } from '@superset-ui/core';\nimport Icons from 'src/components/Icons';\nimport { ContentType, MetadataType } from '.';\n\nconst Header = styled.div`\n  font-weight: ${({ theme }) => theme.typography.weights.bold};\n`;\n\nconst Info = ({\n  text,\n  header,\n}: {\n  text?: string | string[];\n  header?: string;\n}) => {\n  const values = ensureIsArray(text);\n  return (\n    <>\n      {header && <Header>{header}</Header>}\n      {values.map(value => (\n        <div key={value}>{value}</div>\n      ))}\n    </>\n  );\n};\n\nconst config = (contentType: ContentType) => {\n  const { type } = contentType;\n\n  /**\n   * Tooltips are very similar. It's pretty much blocks\n   * of header/text pairs. That's why they are implemented here.\n   * If more complex tooltips emerge, then we should extract the different\n   * types of tooltips to their own components and reference them here.\n   */\n\n  switch (type) {\n    case MetadataType.DASHBOARDS:\n      return {\n        icon: Icons.FundProjectionScreenOutlined,\n        title: contentType.title,\n        tooltip: contentType.description ? (\n          <div>\n            <Info header={contentType.title} text={contentType.description} />\n          </div>\n        ) : undefined,\n      };\n\n    case MetadataType.DESCRIPTION:\n      return {\n        icon: Icons.BookOutlined,\n        title: contentType.value,\n      };\n\n    case MetadataType.LAST_MODIFIED:\n      return {\n        icon: Icons.EditOutlined,\n        title: contentType.value,\n        tooltip: (\n          <div>\n            <Info header={t('Last modified')} text={contentType.value} />\n            <Info header={t('Modified by')} text={contentType.modifiedBy} />\n          </div>\n        ),\n      };\n\n    case MetadataType.OWNER:\n      return {\n        icon: Icons.UserOutlined,\n        title: contentType.createdBy,\n        tooltip: (\n          <div>\n            <Info header={t('Created by')} text={contentType.createdBy} />\n            <Info header={t('Owners')} text={contentType.owners} />\n            <Info header={t('Created on')} text={contentType.createdOn} />\n          </div>\n        ),\n      };\n\n    case MetadataType.ROWS:\n      return {\n        icon: Icons.InsertRowBelowOutlined,\n        title: contentType.title,\n        tooltip: contentType.title,\n      };\n\n    case MetadataType.SQL:\n      return {\n        icon: Icons.ConsoleSqlOutlined,\n        title: contentType.title,\n        tooltip: contentType.title,\n      };\n\n    case MetadataType.TABLE:\n      return {\n        icon: Icons.Table,\n        title: contentType.title,\n        tooltip: contentType.title,\n      };\n\n    case MetadataType.TAGS:\n      return {\n        icon: Icons.TagsOutlined,\n        title: contentType.values.join(', '),\n        tooltip: (\n          <div>\n            <Info header={t('Tags')} text={contentType.values} />\n          </div>\n        ),\n      };\n\n    default:\n      throw Error(`Invalid type provided: ${type}`);\n  }\n};\n\nexport { config };\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { useResizeDetector } from 'react-resize-detector';\nimport { uniqWith } from 'lodash';\nimport { styled } from '@superset-ui/core';\nimport { Tooltip, TooltipPlacement } from 'src/components/Tooltip';\nimport { ContentType } from './ContentType';\nimport { config } from './ContentConfig';\n\nexport const MIN_NUMBER_ITEMS = 2;\nexport const MAX_NUMBER_ITEMS = 6;\n\nconst HORIZONTAL_PADDING = 12;\nconst VERTICAL_PADDING = 8;\nconst ICON_PADDING = 8;\nconst SPACE_BETWEEN_ITEMS = 16;\nconst ICON_WIDTH = 16;\nconst TEXT_MIN_WIDTH = 70;\nconst TEXT_MAX_WIDTH = 150;\nconst ORDER = {\n  dashboards: 0,\n  table: 1,\n  sql: 2,\n  rows: 3,\n  tags: 4,\n  description: 5,\n  owner: 6,\n  lastModified: 7,\n};\n\nconst Bar = styled.div<{ count: number }>`\n  ${({ theme, count }) => `\n    display: flex;\n    align-items: center;\n    padding: ${VERTICAL_PADDING}px ${HORIZONTAL_PADDING}px;\n    background-color: ${theme.colors.grayscale.light4};\n    color: ${theme.colors.grayscale.base};\n    font-size: ${theme.typography.sizes.s}px;\n    min-width: ${\n      HORIZONTAL_PADDING * 2 +\n      (ICON_WIDTH + SPACE_BETWEEN_ITEMS) * count -\n      SPACE_BETWEEN_ITEMS\n    }px;\n    border-radius: ${theme.borderRadius}px;\n    line-height: 1;\n  `}\n`;\n\nconst StyledItem = styled.div<{\n  collapsed: boolean;\n  last: boolean;\n  onClick?: () => void;\n}>`\n  ${({ theme, collapsed, last, onClick }) => `\n    display: flex;\n    align-items: center;\n    max-width: ${\n      ICON_WIDTH +\n      ICON_PADDING +\n      TEXT_MAX_WIDTH +\n      (last ? 0 : SPACE_BETWEEN_ITEMS)\n    }px;\n    min-width: ${\n      collapsed\n        ? ICON_WIDTH + (last ? 0 : SPACE_BETWEEN_ITEMS)\n        : ICON_WIDTH +\n          ICON_PADDING +\n          TEXT_MIN_WIDTH +\n          (last ? 0 : SPACE_BETWEEN_ITEMS)\n    }px;\n    padding-right: ${last ? 0 : SPACE_BETWEEN_ITEMS}px;\n    cursor: ${onClick ? 'pointer' : 'default'};\n    & .metadata-icon {\n      color: ${\n        onClick && collapsed\n          ? theme.colors.primary.base\n          : theme.colors.grayscale.base\n      };\n      padding-right: ${collapsed ? 0 : ICON_PADDING}px;\n      & .anticon {\n        line-height: 0;\n      }\n    }\n    & .metadata-text {\n      min-width: ${TEXT_MIN_WIDTH}px;\n      overflow: hidden;\n      text-overflow: ${collapsed ? 'unset' : 'ellipsis'};\n      white-space: nowrap;\n      text-decoration: ${onClick ? 'underline' : 'none'};\n    }\n  `}\n`;\n\n// Make sure big tootips are truncated\nconst TootipContent = styled.div`\n  display: -webkit-box;\n  -webkit-line-clamp: 20;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n\nconst Item = ({\n  barWidth,\n  contentType,\n  collapsed,\n  last = false,\n  tooltipPlacement,\n}: {\n  barWidth: number | undefined;\n  contentType: ContentType;\n  collapsed: boolean;\n  last?: boolean;\n  tooltipPlacement: TooltipPlacement;\n}) => {\n  const { icon, title, tooltip = title } = config(contentType);\n  const [isTruncated, setIsTruncated] = useState(false);\n  const ref = useRef<HTMLDivElement>(null);\n  const Icon = icon;\n  const { type, onClick } = contentType;\n\n  useEffect(() => {\n    setIsTruncated(\n      ref.current ? ref.current.scrollWidth > ref.current.clientWidth : false,\n    );\n  }, [barWidth, setIsTruncated, contentType]);\n\n  const content = (\n    <StyledItem\n      collapsed={collapsed}\n      last={last}\n      onClick={onClick ? () => onClick(type) : undefined}\n    >\n      <Icon iconSize=\"l\" className=\"metadata-icon\" />\n      {!collapsed && (\n        <span ref={ref} className=\"metadata-text\">\n          {title}\n        </span>\n      )}\n    </StyledItem>\n  );\n  return isTruncated || collapsed || (tooltip && tooltip !== title) ? (\n    <Tooltip\n      placement={tooltipPlacement}\n      title={<TootipContent>{tooltip}</TootipContent>}\n    >\n      {content}\n    </Tooltip>\n  ) : (\n    content\n  );\n};\n\nexport interface MetadataBarProps {\n  /**\n   * Array of content type configurations. To see the available properties\n   * for each content type, check {@link ContentType}\n   */\n  items: ContentType[];\n  /**\n   * Antd tooltip placement. To see available values, check {@link TooltipPlacement}.\n   * Defaults to \"top\".\n   */\n  tooltipPlacement?: TooltipPlacement;\n}\n\n/**\n * The metadata bar component is used to display additional information about an entity.\n * Content types are predefined and consistent across the whole app. This means that\n * they will be displayed and behave in a consistent manner, keeping the same ordering,\n * information formatting, and interactions.\n * To extend the list of content types, a developer needs to request the inclusion of the new type in the design system.\n * This process is important to make sure the new type is reviewed by the design team, improving Superset consistency.\n */\nconst MetadataBar = ({ items, tooltipPlacement = 'top' }: MetadataBarProps) => {\n  const [width, setWidth] = useState<number>();\n  const [collapsed, setCollapsed] = useState(false);\n  const uniqueItems = uniqWith(items, (a, b) => a.type === b.type);\n  const sortedItems = uniqueItems.sort((a, b) => ORDER[a.type] - ORDER[b.type]);\n  const count = sortedItems.length;\n  if (count < MIN_NUMBER_ITEMS) {\n    throw Error('The minimum number of items for the metadata bar is 2.');\n  }\n  if (count > MAX_NUMBER_ITEMS) {\n    throw Error('The maximum number of items for the metadata bar is 6.');\n  }\n\n  const onResize = useCallback(\n    width => {\n      // Calculates the breakpoint width to collapse the bar.\n      // The last item does not have a space, so we subtract SPACE_BETWEEN_ITEMS from the total.\n      const breakpoint =\n        (ICON_WIDTH + ICON_PADDING + TEXT_MIN_WIDTH + SPACE_BETWEEN_ITEMS) *\n          count -\n        SPACE_BETWEEN_ITEMS;\n      setWidth(width);\n      setCollapsed(Boolean(width && width < breakpoint));\n    },\n    [count],\n  );\n\n  const { ref } = useResizeDetector({ onResize });\n\n  return (\n    <Bar ref={ref} count={count} data-test=\"metadata-bar\">\n      {sortedItems.map((item, index) => (\n        <Item\n          barWidth={width}\n          key={index}\n          contentType={item}\n          collapsed={collapsed}\n          last={index === count - 1}\n          tooltipPlacement={tooltipPlacement}\n        />\n      ))}\n    </Bar>\n  );\n};\n\nexport default MetadataBar;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nexport enum MetadataType {\n  DASHBOARDS = 'dashboards',\n  DESCRIPTION = 'description',\n  LAST_MODIFIED = 'lastModified',\n  OWNER = 'owner',\n  ROWS = 'rows',\n  SQL = 'sql',\n  TABLE = 'table',\n  TAGS = 'tags',\n}\n\nexport type Dashboards = {\n  type: MetadataType.DASHBOARDS;\n  title: string;\n  description?: string;\n  onClick?: (type: string) => void;\n};\n\nexport type Description = {\n  type: MetadataType.DESCRIPTION;\n  value: string;\n  onClick?: (type: string) => void;\n};\n\nexport type LastModified = {\n  type: MetadataType.LAST_MODIFIED;\n  value: string;\n  modifiedBy: string;\n  onClick?: (type: string) => void;\n};\n\nexport type Owner = {\n  type: MetadataType.OWNER;\n  createdBy: string;\n  owners: string[];\n  createdOn: string;\n  onClick?: (type: string) => void;\n};\n\nexport type Rows = {\n  type: MetadataType.ROWS;\n  title: string;\n  onClick?: (type: string) => void;\n};\n\nexport type Sql = {\n  type: MetadataType.SQL;\n  title: string;\n  onClick?: (type: string) => void;\n};\n\nexport type Table = {\n  type: MetadataType.TABLE;\n  title: string;\n  onClick?: (type: string) => void;\n};\n\nexport type Tags = {\n  type: MetadataType.TAGS;\n  values: string[];\n  onClick?: (type: string) => void;\n};\n\nexport type ContentType =\n  | Dashboards\n  | Description\n  | LastModified\n  | Owner\n  | Rows\n  | Sql\n  | Table\n  | Tags;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport MetadataBar, {\n  MetadataBarProps,\n  MIN_NUMBER_ITEMS,\n  MAX_NUMBER_ITEMS,\n} from './MetadataBar';\n\nexport default MetadataBar;\n\nexport { MetadataBarProps, MIN_NUMBER_ITEMS, MAX_NUMBER_ITEMS };\n\nexport * from './ContentType';\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/**\n * Types mirroring enums in `superset/reports/models.py`:\n */\nexport type ReportScheduleType = 'Alert' | 'Report';\nexport type ReportCreationMethod = 'charts' | 'dashboards' | 'alerts_reports';\n\nexport type ReportRecipientType = 'Email' | 'Slack';\n\nexport enum ReportType {\n  DASHBOARDS = 'dashboards',\n  CHARTS = 'charts',\n}\n\nexport enum NOTIFICATION_FORMATS {\n  TEXT = 'TEXT',\n  PNG = 'PNG',\n  CSV = 'CSV',\n}\nexport interface ReportObject {\n  id?: number;\n  active: boolean;\n  crontab: string;\n  dashboard?: number;\n  chart?: number;\n  description?: string;\n  log_retention: number;\n  name: string;\n  owners: number[];\n  recipients: [\n    { recipient_config_json: { target: string }; type: ReportRecipientType },\n  ];\n  report_format: string;\n  timezone: string;\n  type: ReportScheduleType;\n  validator_config_json: {} | null;\n  validator_type: string;\n  working_timeout: number;\n  creation_method: string;\n  force_screenshot: boolean;\n  error?: string;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { styled, css, SupersetTheme } from '@superset-ui/core';\nimport Modal from 'src/components/Modal';\nimport Button from 'src/components/Button';\nimport { Radio } from 'src/components/Radio';\nimport { CronPicker } from 'src/components/CronPicker';\n\nexport const StyledModal = styled(Modal)`\n  .ant-modal-body {\n    padding: 0;\n  }\n`;\n\nexport const StyledTopSection = styled.div`\n  padding: ${({ theme }) =>\n    `${theme.gridUnit * 3}px ${theme.gridUnit * 4}px ${theme.gridUnit * 2}px`};\n  label {\n    font-size: ${({ theme }) => theme.typography.sizes.s}px;\n    color: ${({ theme }) => theme.colors.grayscale.light1};\n  }\n`;\n\nexport const StyledBottomSection = styled.div`\n  border-top: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n  padding: ${({ theme }) =>\n    `${theme.gridUnit * 4}px ${theme.gridUnit * 4}px ${theme.gridUnit * 6}px`};\n  .ant-select {\n    width: 100%;\n  }\n  .control-label {\n    font-size: ${({ theme }) => theme.typography.sizes.s}px;\n    color: ${({ theme }) => theme.colors.grayscale.light1};\n  }\n`;\n\nexport const StyledIconWrapper = styled.span`\n  span {\n    margin-right: ${({ theme }) => theme.gridUnit * 2}px;\n    vertical-align: middle;\n  }\n  .text {\n    vertical-align: middle;\n  }\n`;\n\nexport const StyledScheduleTitle = styled.div`\n  margin-bottom: ${({ theme }) => theme.gridUnit * 7}px;\n\n  h4 {\n    margin-bottom: ${({ theme }) => theme.gridUnit * 3}px;\n  }\n`;\n\nexport const StyledCronPicker = styled(CronPicker)`\n  margin-bottom: ${({ theme }) => theme.gridUnit * 3}px;\n  width: ${({ theme }) => theme.gridUnit * 120}px;\n`;\n\nexport const StyledCronError = styled.p`\n  color: ${({ theme }) => theme.colors.error.base};\n`;\n\nexport const noBottomMargin = css`\n  margin-bottom: 0;\n`;\n\nexport const StyledFooterButton = styled(Button)`\n  width: ${({ theme }) => theme.gridUnit * 40}px;\n`;\n\nexport const TimezoneHeaderStyle = (theme: SupersetTheme) => css`\n  margin: ${theme.gridUnit * 3}px 0 ${theme.gridUnit * 2}px;\n`;\n\nexport const SectionHeaderStyle = (theme: SupersetTheme) => css`\n  margin: ${theme.gridUnit * 3}px 0;\n`;\n\nexport const StyledMessageContentTitle = styled.div`\n  margin: ${({ theme }) => theme.gridUnit * 8}px 0\n    ${({ theme }) => theme.gridUnit * 4}px;\n`;\n\nexport const StyledRadio = styled(Radio)`\n  display: block;\n  line-height: ${({ theme }) => theme.gridUnit * 8}px;\n`;\n\nexport const StyledRadioGroup = styled(Radio.Group)`\n  margin-left: ${({ theme }) => theme.gridUnit * 0.5}px;\n`;\n\nexport const antDErrorAlertStyles = (theme: SupersetTheme) => css`\n  border: ${theme.colors.error.base} 1px solid;\n  padding: ${theme.gridUnit * 4}px;\n  margin: ${theme.gridUnit * 4}px;\n  margin-top: 0;\n  color: ${theme.colors.error.dark2};\n  .ant-alert-message {\n    font-size: ${theme.typography.sizes.m}px;\n    font-weight: bold;\n  }\n  .ant-alert-description {\n    font-size: ${theme.typography.sizes.m}px;\n    line-height: ${theme.gridUnit * 4}px;\n    .ant-alert-icon {\n      margin-right: ${theme.gridUnit * 2.5}px;\n      font-size: ${theme.typography.sizes.l}px;\n      position: relative;\n      top: ${theme.gridUnit / 4}px;\n    }\n  }\n`;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, {\n  useState,\n  useEffect,\n  useReducer,\n  useCallback,\n  useMemo,\n} from 'react';\nimport { t, SupersetTheme } from '@superset-ui/core';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getClientErrorObject } from 'src/utils/getClientErrorObject';\nimport { addReport, editReport } from 'src/reports/actions/reports';\nimport Alert from 'src/components/Alert';\nimport TimezoneSelector from 'src/components/TimezoneSelector';\nimport LabeledErrorBoundInput from 'src/components/Form/LabeledErrorBoundInput';\nimport Icons from 'src/components/Icons';\nimport { CronError } from 'src/components/CronPicker';\nimport { RadioChangeEvent } from 'src/components';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport { ChartState } from 'src/explore/types';\nimport {\n  ReportCreationMethod,\n  ReportObject,\n  NOTIFICATION_FORMATS,\n} from 'src/reports/types';\nimport { reportSelector } from 'src/views/CRUD/hooks';\nimport { CreationMethod } from './HeaderReportDropdown';\nimport {\n  antDErrorAlertStyles,\n  StyledModal,\n  StyledTopSection,\n  StyledBottomSection,\n  StyledIconWrapper,\n  StyledScheduleTitle,\n  StyledCronPicker,\n  StyledCronError,\n  noBottomMargin,\n  StyledFooterButton,\n  TimezoneHeaderStyle,\n  SectionHeaderStyle,\n  StyledMessageContentTitle,\n  StyledRadio,\n  StyledRadioGroup,\n} from './styles';\n\ninterface ReportProps {\n  onHide: () => {};\n  addDangerToast: (msg: string) => void;\n  show: boolean;\n  userId: number;\n  userEmail: string;\n  chart?: ChartState;\n  chartName?: string;\n  dashboardId?: number;\n  dashboardName?: string;\n  creationMethod: ReportCreationMethod;\n  props: any;\n}\n\nconst TEXT_BASED_VISUALIZATION_TYPES = [\n  'pivot_table',\n  'pivot_table_v2',\n  'table',\n  'paired_ttest',\n];\n\nconst INITIAL_STATE = {\n  crontab: '0 12 * * 1',\n};\n\ntype ReportObjectState = Partial<ReportObject> & {\n  error?: string;\n  /**\n   * Is submitting changes to the backend.\n   */\n  isSubmitting?: boolean;\n};\n\nfunction ReportModal({\n  onHide,\n  show = false,\n  dashboardId,\n  chart,\n  userId,\n  userEmail,\n  creationMethod,\n  dashboardName,\n  chartName,\n}: ReportProps) {\n  const vizType = chart?.sliceFormData?.viz_type;\n  const isChart = !!chart;\n  const isTextBasedChart =\n    isChart && vizType && TEXT_BASED_VISUALIZATION_TYPES.includes(vizType);\n  const defaultNotificationFormat = isTextBasedChart\n    ? NOTIFICATION_FORMATS.TEXT\n    : NOTIFICATION_FORMATS.PNG;\n  const entityName = dashboardName || chartName;\n  const initialState: ReportObjectState = useMemo(\n    () => ({\n      ...INITIAL_STATE,\n      name: entityName\n        ? t('Weekly Report for %s', entityName)\n        : t('Weekly Report'),\n    }),\n    [entityName],\n  );\n\n  const reportReducer = useCallback(\n    (state: ReportObjectState | null, action: 'reset' | ReportObjectState) => {\n      if (action === 'reset') {\n        return initialState;\n      }\n      return {\n        ...state,\n        ...action,\n      };\n    },\n    [initialState],\n  );\n\n  const [currentReport, setCurrentReport] = useReducer(\n    reportReducer,\n    initialState,\n  );\n  const [cronError, setCronError] = useState<CronError>();\n\n  const dispatch = useDispatch();\n  // Report fetch logic\n  const report = useSelector<any, ReportObject>(state => {\n    const resourceType = dashboardId\n      ? CreationMethod.DASHBOARDS\n      : CreationMethod.CHARTS;\n    return reportSelector(state, resourceType, dashboardId || chart?.id);\n  });\n  const isEditMode = report && Object.keys(report).length;\n\n  useEffect(() => {\n    if (isEditMode) {\n      setCurrentReport(report);\n    } else {\n      setCurrentReport('reset');\n    }\n  }, [isEditMode, report]);\n\n  const onSave = async () => {\n    // Create new Report\n    const newReportValues: Partial<ReportObject> = {\n      type: 'Report',\n      active: true,\n      force_screenshot: false,\n      creation_method: creationMethod,\n      dashboard: dashboardId,\n      chart: chart?.id,\n      owners: [userId],\n      recipients: [\n        {\n          recipient_config_json: { target: userEmail },\n          type: 'Email',\n        },\n      ],\n      name: currentReport.name,\n      description: currentReport.description,\n      crontab: currentReport.crontab,\n      report_format: currentReport.report_format || defaultNotificationFormat,\n      timezone: currentReport.timezone,\n    };\n\n    setCurrentReport({ isSubmitting: true, error: undefined });\n    try {\n      if (isEditMode) {\n        await dispatch(\n          editReport(currentReport.id, newReportValues as ReportObject),\n        );\n      } else {\n        await dispatch(addReport(newReportValues as ReportObject));\n      }\n      onHide();\n    } catch (e) {\n      const { error } = await getClientErrorObject(e);\n      setCurrentReport({ error });\n    }\n    setCurrentReport({ isSubmitting: false });\n  };\n\n  const wrappedTitle = (\n    <StyledIconWrapper>\n      <Icons.Calendar />\n      <span className=\"text\">\n        {isEditMode ? t('Edit email report') : t('Schedule a new email report')}\n      </span>\n    </StyledIconWrapper>\n  );\n\n  const renderModalFooter = (\n    <>\n      <StyledFooterButton key=\"back\" onClick={onHide}>\n        {t('Cancel')}\n      </StyledFooterButton>\n      <StyledFooterButton\n        key=\"submit\"\n        buttonStyle=\"primary\"\n        onClick={onSave}\n        disabled={!currentReport.name}\n        loading={currentReport.isSubmitting}\n      >\n        {isEditMode ? t('Save') : t('Add')}\n      </StyledFooterButton>\n    </>\n  );\n\n  const renderMessageContentSection = (\n    <>\n      <StyledMessageContentTitle>\n        <h4>{t('Message content')}</h4>\n      </StyledMessageContentTitle>\n      <div className=\"inline-container\">\n        <StyledRadioGroup\n          onChange={(event: RadioChangeEvent) => {\n            setCurrentReport({ report_format: event.target.value });\n          }}\n          value={currentReport.report_format || defaultNotificationFormat}\n        >\n          {isTextBasedChart && (\n            <StyledRadio value={NOTIFICATION_FORMATS.TEXT}>\n              {t('Text embedded in email')}\n            </StyledRadio>\n          )}\n          <StyledRadio value={NOTIFICATION_FORMATS.PNG}>\n            {t('Image (PNG) embedded in email')}\n          </StyledRadio>\n          <StyledRadio value={NOTIFICATION_FORMATS.CSV}>\n            {t('Formatted CSV attached in email')}\n          </StyledRadio>\n        </StyledRadioGroup>\n      </div>\n    </>\n  );\n\n  return (\n    <StyledModal\n      show={show}\n      onHide={onHide}\n      title={wrappedTitle}\n      footer={renderModalFooter}\n      width=\"432\"\n      centered\n    >\n      <StyledTopSection>\n        <LabeledErrorBoundInput\n          id=\"name\"\n          name=\"name\"\n          value={currentReport.name || ''}\n          placeholder={initialState.name}\n          required\n          validationMethods={{\n            onChange: ({ target }: { target: HTMLInputElement }) =>\n              setCurrentReport({ name: target.value }),\n          }}\n          label={t('Report Name')}\n          data-test=\"report-name-test\"\n        />\n        <LabeledErrorBoundInput\n          id=\"description\"\n          name=\"description\"\n          value={currentReport?.description || ''}\n          validationMethods={{\n            onChange: ({ target }: { target: HTMLInputElement }) => {\n              setCurrentReport({ description: target.value });\n            },\n          }}\n          label={t('Description')}\n          placeholder={t(\n            'Include a description that will be sent with your report',\n          )}\n          css={noBottomMargin}\n          data-test=\"report-description-test\"\n        />\n      </StyledTopSection>\n\n      <StyledBottomSection>\n        <StyledScheduleTitle>\n          <h4 css={(theme: SupersetTheme) => SectionHeaderStyle(theme)}>\n            {t('Schedule')}\n          </h4>\n          <p>\n            {t('A screenshot of the dashboard will be sent to your email at')}\n          </p>\n        </StyledScheduleTitle>\n\n        <StyledCronPicker\n          clearButton={false}\n          value={currentReport.crontab || '0 12 * * 1'}\n          setValue={(newValue: string) => {\n            setCurrentReport({ crontab: newValue });\n          }}\n          onError={setCronError}\n        />\n        <StyledCronError>{cronError}</StyledCronError>\n        <div\n          className=\"control-label\"\n          css={(theme: SupersetTheme) => TimezoneHeaderStyle(theme)}\n        >\n          {t('Timezone')}\n        </div>\n        <TimezoneSelector\n          timezone={currentReport.timezone}\n          onTimezoneChange={value => {\n            setCurrentReport({ timezone: value });\n          }}\n        />\n        {isChart && renderMessageContentSection}\n      </StyledBottomSection>\n      {currentReport.error && (\n        <Alert\n          type=\"error\"\n          css={(theme: SupersetTheme) => antDErrorAlertStyles(theme)}\n          message={\n            isEditMode\n              ? t('Failed to update report')\n              : t('Failed to create report')\n          }\n          description={currentReport.error}\n        />\n      )}\n    </StyledModal>\n  );\n}\n\nexport default withToasts(ReportModal);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState, useEffect } from 'react';\nimport { usePrevious } from 'src/hooks/usePrevious';\nimport { useSelector, useDispatch } from 'react-redux';\nimport {\n  t,\n  SupersetTheme,\n  css,\n  styled,\n  useTheme,\n  FeatureFlag,\n  isFeatureEnabled,\n  getExtensionsRegistry,\n} from '@superset-ui/core';\nimport Icons from 'src/components/Icons';\nimport { Switch } from 'src/components/Switch';\nimport { AlertObject } from 'src/views/CRUD/alert/types';\nimport { Menu } from 'src/components/Menu';\nimport Checkbox from 'src/components/Checkbox';\nimport { noOp } from 'src/utils/common';\nimport { NoAnimationDropdown } from 'src/components/Dropdown';\nimport DeleteModal from 'src/components/DeleteModal';\nimport ReportModal from 'src/components/ReportModal';\nimport { ChartState } from 'src/explore/types';\nimport { UserWithPermissionsAndRoles } from 'src/types/bootstrapTypes';\nimport {\n  fetchUISpecificReport,\n  toggleActive,\n  deleteActiveReport,\n} from 'src/reports/actions/reports';\nimport { reportSelector } from 'src/views/CRUD/hooks';\nimport { MenuItemWithCheckboxContainer } from 'src/explore/components/useExploreAdditionalActionsMenu/index';\n\nconst extensionsRegistry = getExtensionsRegistry();\n\nconst deleteColor = (theme: SupersetTheme) => css`\n  color: ${theme.colors.error.base};\n`;\n\nconst onMenuHover = (theme: SupersetTheme) => css`\n  & .ant-menu-item {\n    padding: 5px 12px;\n    margin-top: 0px;\n    margin-bottom: 4px;\n    :hover {\n      color: ${theme.colors.grayscale.dark1};\n    }\n  }\n  :hover {\n    background-color: ${theme.colors.secondary.light5};\n  }\n`;\n\nconst onMenuItemHover = (theme: SupersetTheme) => css`\n  &:hover {\n    color: ${theme.colors.grayscale.dark1};\n    background-color: ${theme.colors.secondary.light5};\n  }\n`;\n\nconst StyledDropdownItemWithIcon = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  > *:first-child {\n    margin-right: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nconst DropdownItemExtension = extensionsRegistry.get(\n  'report-modal.dropdown.item.icon',\n);\n\nexport enum CreationMethod {\n  CHARTS = 'charts',\n  DASHBOARDS = 'dashboards',\n}\nexport interface HeaderReportProps {\n  dashboardId?: number;\n  chart?: ChartState;\n  useTextMenu?: boolean;\n  setShowReportSubMenu?: (show: boolean) => void;\n  setIsDropdownVisible?: (visible: boolean) => void;\n  isDropdownVisible?: boolean;\n  showReportSubMenu?: boolean;\n}\n\nexport default function HeaderReportDropDown({\n  dashboardId,\n  chart,\n  useTextMenu = false,\n  setShowReportSubMenu,\n  setIsDropdownVisible,\n  isDropdownVisible,\n}: HeaderReportProps) {\n  const dispatch = useDispatch();\n  const report = useSelector<any, AlertObject>(state => {\n    const resourceType = dashboardId\n      ? CreationMethod.DASHBOARDS\n      : CreationMethod.CHARTS;\n    return reportSelector(state, resourceType, dashboardId || chart?.id);\n  });\n\n  const isReportActive: boolean = report?.active || false;\n  const user: UserWithPermissionsAndRoles = useSelector<\n    any,\n    UserWithPermissionsAndRoles\n  >(state => state.user);\n  const canAddReports = () => {\n    if (!isFeatureEnabled(FeatureFlag.ALERT_REPORTS)) {\n      return false;\n    }\n\n    if (!user?.userId) {\n      // this is in the case that there is an anonymous user.\n      return false;\n    }\n    const roles = Object.keys(user.roles || []);\n    const permissions = roles.map(key =>\n      user.roles[key].filter(\n        perms => perms[0] === 'menu_access' && perms[1] === 'Manage',\n      ),\n    );\n    return permissions.some(permission => permission.length > 0);\n  };\n\n  const [currentReportDeleting, setCurrentReportDeleting] =\n    useState<AlertObject | null>(null);\n  const theme = useTheme();\n  const prevDashboard = usePrevious(dashboardId);\n  const [showModal, setShowModal] = useState<boolean>(false);\n  const toggleActiveKey = async (data: AlertObject, checked: boolean) => {\n    if (data?.id) {\n      dispatch(toggleActive(data, checked));\n    }\n  };\n\n  const handleReportDelete = async (report: AlertObject) => {\n    await dispatch(deleteActiveReport(report));\n    setCurrentReportDeleting(null);\n  };\n\n  const shouldFetch =\n    canAddReports() &&\n    !!((dashboardId && prevDashboard !== dashboardId) || chart?.id);\n\n  useEffect(() => {\n    if (shouldFetch) {\n      dispatch(\n        fetchUISpecificReport({\n          userId: user.userId,\n          filterField: dashboardId ? 'dashboard_id' : 'chart_id',\n          creationMethod: dashboardId ? 'dashboards' : 'charts',\n          resourceId: dashboardId || chart?.id,\n        }),\n      );\n    }\n  }, []);\n\n  const showReportSubMenu = report && setShowReportSubMenu && canAddReports();\n\n  useEffect(() => {\n    if (showReportSubMenu) {\n      setShowReportSubMenu(true);\n    } else if (!report && setShowReportSubMenu) {\n      setShowReportSubMenu(false);\n    }\n  }, [report]);\n\n  const handleShowMenu = () => {\n    if (setIsDropdownVisible) {\n      setIsDropdownVisible(false);\n      setShowModal(true);\n    }\n  };\n\n  const handleDeleteMenuClick = () => {\n    if (setIsDropdownVisible) {\n      setIsDropdownVisible(false);\n      setCurrentReportDeleting(report);\n    }\n  };\n\n  const textMenu = () =>\n    report ? (\n      isDropdownVisible && (\n        <Menu selectable={false} css={{ border: 'none' }}>\n          <Menu.Item\n            css={onMenuItemHover}\n            onClick={() => toggleActiveKey(report, !isReportActive)}\n          >\n            <MenuItemWithCheckboxContainer>\n              <Checkbox checked={isReportActive} onChange={noOp} />\n              {t('Email reports active')}\n            </MenuItemWithCheckboxContainer>\n          </Menu.Item>\n          <Menu.Item css={onMenuItemHover} onClick={handleShowMenu}>\n            {t('Edit email report')}\n          </Menu.Item>\n          <Menu.Item css={onMenuItemHover} onClick={handleDeleteMenuClick}>\n            {t('Delete email report')}\n          </Menu.Item>\n        </Menu>\n      )\n    ) : (\n      <Menu selectable={false} css={onMenuHover}>\n        <Menu.Item onClick={handleShowMenu}>\n          {DropdownItemExtension ? (\n            <StyledDropdownItemWithIcon>\n              <div>{t('Set up an email report')}</div>\n              <DropdownItemExtension />\n            </StyledDropdownItemWithIcon>\n          ) : (\n            t('Set up an email report')\n          )}\n        </Menu.Item>\n        <Menu.Divider />\n      </Menu>\n    );\n  const menu = () => (\n    <Menu selectable={false} css={{ width: '200px' }}>\n      <Menu.Item>\n        {t('Email reports active')}\n        <Switch\n          data-test=\"toggle-active\"\n          checked={isReportActive}\n          onClick={(checked: boolean) => toggleActiveKey(report, checked)}\n          size=\"small\"\n          css={{ marginLeft: theme.gridUnit * 2 }}\n        />\n      </Menu.Item>\n      <Menu.Item onClick={() => setShowModal(true)}>\n        {t('Edit email report')}\n      </Menu.Item>\n      <Menu.Item\n        onClick={() => setCurrentReportDeleting(report)}\n        css={deleteColor}\n      >\n        {t('Delete email report')}\n      </Menu.Item>\n    </Menu>\n  );\n\n  const iconMenu = () =>\n    report ? (\n      <>\n        <NoAnimationDropdown\n          overlay={menu()}\n          trigger={['click']}\n          getPopupContainer={(triggerNode: any) =>\n            triggerNode.closest('.action-button')\n          }\n        >\n          <span\n            role=\"button\"\n            className=\"action-button action-schedule-report\"\n            tabIndex={0}\n          >\n            <Icons.Calendar />\n          </span>\n        </NoAnimationDropdown>\n      </>\n    ) : (\n      <span\n        role=\"button\"\n        title={t('Schedule email report')}\n        tabIndex={0}\n        className=\"action-button action-schedule-report\"\n        onClick={() => setShowModal(true)}\n      >\n        <Icons.Calendar />\n      </span>\n    );\n\n  return (\n    <>\n      {canAddReports() && (\n        <>\n          <ReportModal\n            userId={user.userId}\n            show={showModal}\n            onHide={() => setShowModal(false)}\n            userEmail={user.email}\n            dashboardId={dashboardId}\n            chart={chart}\n            creationMethod={\n              dashboardId ? CreationMethod.DASHBOARDS : CreationMethod.CHARTS\n            }\n          />\n          {useTextMenu ? textMenu() : iconMenu()}\n          {currentReportDeleting && (\n            <DeleteModal\n              description={t(\n                'This action will permanently delete %s.',\n                currentReportDeleting?.name,\n              )}\n              onConfirm={() => {\n                if (currentReportDeleting) {\n                  handleReportDelete(currentReportDeleting);\n                }\n              }}\n              onHide={() => setCurrentReportDeleting(null)}\n              open\n              title={t('Delete Report?')}\n            />\n          )}\n        </>\n      )}\n    </>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { styled } from '@superset-ui/core';\nimport BaseSwitch, { SwitchProps } from 'antd/lib/switch';\n\nconst StyledSwitch = styled(BaseSwitch)`\n  .ant-switch-checked {\n    background-color: ${({ theme }) => theme.colors.primary.base};\n  }\n`;\n\nexport const Switch = (props: SwitchProps) => <StyledSwitch {...props} />;\nexport type { SwitchProps };\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { useEffect, useMemo } from 'react';\nimport moment from 'moment-timezone';\nimport { t } from '@superset-ui/core';\nimport { Select } from 'src/components';\n\nconst DEFAULT_TIMEZONE = {\n  name: 'GMT Standard Time',\n  value: 'Africa/Abidjan', // timezones are deduped by the first alphabetical value\n};\n\nconst MIN_SELECT_WIDTH = '400px';\n\nconst offsetsToName = {\n  '-300-240': ['Eastern Standard Time', 'Eastern Daylight Time'],\n  '-360-300': ['Central Standard Time', 'Central Daylight Time'],\n  '-420-360': ['Mountain Standard Time', 'Mountain Daylight Time'],\n  '-420-420': [\n    'Mountain Standard Time - Phoenix',\n    'Mountain Standard Time - Phoenix',\n  ],\n  '-480-420': ['Pacific Standard Time', 'Pacific Daylight Time'],\n  '-540-480': ['Alaska Standard Time', 'Alaska Daylight Time'],\n  '-600-600': ['Hawaii Standard Time', 'Hawaii Daylight Time'],\n  '60120': ['Central European Time', 'Central European Daylight Time'],\n  '00': [DEFAULT_TIMEZONE.name, DEFAULT_TIMEZONE.name],\n  '060': ['GMT Standard Time - London', 'British Summer Time'],\n};\n\nconst currentDate = moment();\nconst JANUARY = moment([2021, 1]);\nconst JULY = moment([2021, 7]);\n\nconst getOffsetKey = (name: string) =>\n  JANUARY.tz(name).utcOffset().toString() +\n  JULY.tz(name).utcOffset().toString();\n\nconst getTimezoneName = (name: string) => {\n  const offsets = getOffsetKey(name);\n  return (\n    (currentDate.tz(name).isDST()\n      ? offsetsToName[offsets]?.[1]\n      : offsetsToName[offsets]?.[0]) || name\n  );\n};\n\nconst ALL_ZONES = moment.tz\n  .countries()\n  .map(country => moment.tz.zonesForCountry(country, true))\n  .flat();\n\nconst TIMEZONES: moment.MomentZoneOffset[] = [];\nALL_ZONES.forEach(zone => {\n  if (\n    !TIMEZONES.find(\n      option => getOffsetKey(option.name) === getOffsetKey(zone.name),\n    )\n  ) {\n    TIMEZONES.push(zone); // dedupe zones by offsets\n  }\n});\n\nconst TIMEZONE_OPTIONS = TIMEZONES.map(zone => ({\n  label: `GMT ${moment\n    .tz(currentDate, zone.name)\n    .format('Z')} (${getTimezoneName(zone.name)})`,\n  value: zone.name,\n  offsets: getOffsetKey(zone.name),\n  timezoneName: zone.name,\n}));\n\nconst TIMEZONE_OPTIONS_SORT_COMPARATOR = (\n  a: typeof TIMEZONE_OPTIONS[number],\n  b: typeof TIMEZONE_OPTIONS[number],\n) =>\n  moment.tz(currentDate, a.timezoneName).utcOffset() -\n  moment.tz(currentDate, b.timezoneName).utcOffset();\n\n// pre-sort timezone options by time offset\nTIMEZONE_OPTIONS.sort(TIMEZONE_OPTIONS_SORT_COMPARATOR);\n\nconst matchTimezoneToOptions = (timezone: string) =>\n  TIMEZONE_OPTIONS.find(option => option.offsets === getOffsetKey(timezone))\n    ?.value || DEFAULT_TIMEZONE.value;\n\nexport type TimezoneSelectorProps = {\n  onTimezoneChange: (value: string) => void;\n  timezone?: string | null;\n  minWidth?: string;\n};\n\nexport default function TimezoneSelector({\n  onTimezoneChange,\n  timezone,\n  minWidth = MIN_SELECT_WIDTH, // smallest size for current values\n}: TimezoneSelectorProps) {\n  const validTimezone = useMemo(\n    () => matchTimezoneToOptions(timezone || moment.tz.guess()),\n    [timezone],\n  );\n\n  // force trigger a timezone update if provided `timezone` is not invalid\n  useEffect(() => {\n    if (timezone !== validTimezone) {\n      onTimezoneChange(validTimezone);\n    }\n  }, [validTimezone, onTimezoneChange, timezone]);\n\n  return (\n    <Select\n      ariaLabel={t('Timezone selector')}\n      css={{ minWidth }}\n      onChange={tz => onTimezoneChange(tz as string)}\n      value={validTimezone}\n      options={TIMEZONE_OPTIONS}\n      sortComparator={TIMEZONE_OPTIONS_SORT_COMPARATOR}\n    />\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  DataMaskStateWithId,\n  PartialFilters,\n  JsonObject,\n} from '@superset-ui/core';\nimport { ActiveFilters } from '../types';\nimport { ChartConfiguration } from '../reducers/types';\n\nexport const getRelevantDataMask = (\n  dataMask: DataMaskStateWithId,\n  prop: string,\n): JsonObject | DataMaskStateWithId =>\n  Object.values(dataMask)\n    .filter(item => item[prop])\n    .reduce(\n      (prev, next) => ({ ...prev, [next.id]: prop ? next[prop] : next }),\n      {},\n    );\n\nexport const getAllActiveFilters = ({\n  chartConfiguration,\n  nativeFilters,\n  dataMask,\n  allSliceIds,\n}: {\n  chartConfiguration: ChartConfiguration;\n  dataMask: DataMaskStateWithId;\n  nativeFilters: PartialFilters;\n  allSliceIds: number[];\n}): ActiveFilters => {\n  const activeFilters = {};\n\n  // Combine native filters with cross filters, because they have similar logic\n  Object.values(dataMask).forEach(({ id: filterId, extraFormData }) => {\n    const scope =\n      nativeFilters?.[filterId]?.chartsInScope ??\n      chartConfiguration?.[filterId]?.crossFilters?.chartsInScope ??\n      allSliceIds ??\n      [];\n    // Iterate over all roots to find all affected charts\n    activeFilters[filterId] = {\n      scope,\n      values: extraFormData,\n    };\n  });\n  return activeFilters;\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { DataRecordFilters } from '@superset-ui/core';\n\nexport default function getEffectiveExtraFilters(filters: DataRecordFilters) {\n  return Object.entries(filters)\n    .map(([column, values]) => ({\n      col: column,\n      op: Array.isArray(values) ? 'IN' : '==',\n      val: values,\n    }))\n    .filter(filter => filter.val !== null);\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  DataMaskStateWithId,\n  DataRecordFilters,\n  JsonObject,\n  PartialFilters,\n} from '@superset-ui/core';\nimport { ChartQueryPayload } from 'src/dashboard/types';\nimport { getExtraFormData } from 'src/dashboard/components/nativeFilters/utils';\nimport { areObjectsEqual } from 'src/reduxUtils';\nimport getEffectiveExtraFilters from './getEffectiveExtraFilters';\nimport { ChartConfiguration } from '../../reducers/types';\nimport { getAllActiveFilters } from '../activeAllDashboardFilters';\n\n// We cache formData objects so that our connected container components don't always trigger\n// render cascades. we cannot leverage the reselect library because our cache size is >1\nconst cachedFiltersByChart = {};\nconst cachedFormdataByChart = {};\n\nexport interface GetFormDataWithExtraFiltersArguments {\n  chartConfiguration: ChartConfiguration;\n  chart: ChartQueryPayload;\n  filters: DataRecordFilters;\n  colorScheme?: string;\n  colorNamespace?: string;\n  sliceId: number;\n  dataMask: DataMaskStateWithId;\n  nativeFilters: PartialFilters;\n  extraControls: Record<string, string | boolean | null>;\n  labelColors?: Record<string, string>;\n  sharedLabelColors?: Record<string, string>;\n  allSliceIds: number[];\n}\n\n// this function merge chart's formData with dashboard filters value,\n// and generate a new formData which will be used in the new query.\n// filters param only contains those applicable to this chart.\nexport default function getFormDataWithExtraFilters({\n  chart,\n  filters,\n  nativeFilters,\n  chartConfiguration,\n  colorScheme,\n  colorNamespace,\n  sliceId,\n  dataMask,\n  extraControls,\n  labelColors,\n  sharedLabelColors,\n  allSliceIds,\n}: GetFormDataWithExtraFiltersArguments) {\n  // if dashboard metadata + filters have not changed, use cache if possible\n  const cachedFormData = cachedFormdataByChart[sliceId];\n  if (\n    cachedFiltersByChart[sliceId] === filters &&\n    areObjectsEqual(cachedFormData?.color_scheme, colorScheme, {\n      ignoreUndefined: true,\n    }) &&\n    areObjectsEqual(cachedFormData?.color_namespace, colorNamespace, {\n      ignoreUndefined: true,\n    }) &&\n    areObjectsEqual(cachedFormData?.label_colors, labelColors, {\n      ignoreUndefined: true,\n    }) &&\n    areObjectsEqual(cachedFormData?.shared_label_colors, sharedLabelColors, {\n      ignoreUndefined: true,\n    }) &&\n    !!cachedFormData &&\n    areObjectsEqual(cachedFormData?.dataMask, dataMask, {\n      ignoreUndefined: true,\n    }) &&\n    areObjectsEqual(cachedFormData?.extraControls, extraControls, {\n      ignoreUndefined: true,\n    })\n  ) {\n    return cachedFormData;\n  }\n\n  let extraData: { extra_form_data?: JsonObject } = {};\n  const activeFilters = getAllActiveFilters({\n    chartConfiguration,\n    dataMask,\n    nativeFilters,\n    allSliceIds,\n  });\n  const filterIdsAppliedOnChart = Object.entries(activeFilters)\n    .filter(([, { scope }]) => scope.includes(chart.id))\n    .map(([filterId]) => filterId);\n  if (filterIdsAppliedOnChart.length) {\n    extraData = {\n      extra_form_data: getExtraFormData(dataMask, filterIdsAppliedOnChart),\n    };\n  }\n\n  const formData = {\n    ...chart.form_data,\n    label_colors: labelColors,\n    shared_label_colors: sharedLabelColors,\n    ...(colorScheme && { color_scheme: colorScheme }),\n    extra_filters: getEffectiveExtraFilters(filters),\n    ...extraData,\n    ...extraControls,\n  };\n\n  cachedFiltersByChart[sliceId] = filters;\n  cachedFormdataByChart[sliceId] = { ...formData, dataMask, extraControls };\n\n  return formData;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  Datasource,\n  GenericDataType,\n  JsonObject,\n  QueryFormData,\n} from '@superset-ui/core';\nimport { ExploreActions } from 'src/explore/actions/exploreActions';\nimport { ChartStatus } from 'src/explore/types';\n\nexport enum ResultTypes {\n  Results = 'results',\n  Samples = 'samples',\n}\n\nexport interface DataTablesPaneProps {\n  queryFormData: QueryFormData;\n  datasource: Datasource;\n  queryForce: boolean;\n  ownState?: JsonObject;\n  chartStatus: ChartStatus;\n  onCollapseChange: (isOpen: boolean) => void;\n  errorMessage?: JSX.Element;\n  actions: ExploreActions;\n}\n\nexport interface ResultsPaneProps {\n  isRequest: boolean;\n  queryFormData: QueryFormData;\n  queryForce: boolean;\n  ownState?: JsonObject;\n  errorMessage?: React.ReactElement;\n  actions?: ExploreActions;\n  dataSize?: number;\n  // reload OriginalFormattedTimeColumns from localStorage when isVisible is true\n  isVisible: boolean;\n}\n\nexport interface SamplesPaneProps {\n  isRequest: boolean;\n  datasource: Datasource;\n  queryForce: boolean;\n  actions?: ExploreActions;\n  dataSize?: number;\n  // reload OriginalFormattedTimeColumns from localStorage when isVisible is true\n  isVisible: boolean;\n}\n\nexport interface TableControlsProps {\n  data: Record<string, any>[];\n  // {datasource.id}__{datasource.type}, eg: 1__table\n  datasourceId: string;\n  onInputChange: (input: string) => void;\n  columnNames: string[];\n  columnTypes: GenericDataType[];\n  isLoading: boolean;\n}\n\nexport interface QueryResultInterface {\n  colnames: string[];\n  coltypes: GenericDataType[];\n  data: Record<string, any>[][];\n}\n\nexport interface SingleQueryResultPaneProp extends QueryResultInterface {\n  // {datasource.id}__{datasource.type}, eg: 1__table\n  datasourceId: string;\n  dataSize?: number;\n  // reload OriginalFormattedTimeColumns from localStorage when isVisible is true\n  isVisible: boolean;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useMemo } from 'react';\nimport { zip } from 'lodash';\nimport { css, GenericDataType, styled } from '@superset-ui/core';\nimport {\n  CopyToClipboardButton,\n  FilterInput,\n  RowCount,\n} from 'src/explore/components/DataTableControl';\nimport { applyFormattingToTabularData } from 'src/utils/common';\nimport { getTimeColumns } from 'src/explore/components/DataTableControl/utils';\nimport { TableControlsProps } from '../types';\n\nexport const TableControlsWrapper = styled.div`\n  ${({ theme }) => `\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: ${theme.gridUnit * 2}px;\n\n    span {\n      flex-shrink: 0;\n    }\n  `}\n`;\n\nexport const TableControls = ({\n  data,\n  datasourceId,\n  onInputChange,\n  columnNames,\n  columnTypes,\n  isLoading,\n}: TableControlsProps) => {\n  const originalTimeColumns = getTimeColumns(datasourceId);\n  const formattedTimeColumns = zip<string, GenericDataType>(\n    columnNames,\n    columnTypes,\n  )\n    .filter(\n      ([name, type]) =>\n        type === GenericDataType.TEMPORAL &&\n        name &&\n        !originalTimeColumns.includes(name),\n    )\n    .map(([colname]) => colname);\n  const formattedData = useMemo(\n    () => applyFormattingToTabularData(data, formattedTimeColumns),\n    [data, formattedTimeColumns],\n  );\n  return (\n    <TableControlsWrapper>\n      <FilterInput onChangeHandler={onInputChange} />\n      <div\n        css={css`\n          display: flex;\n          align-items: center;\n        `}\n      >\n        <RowCount data={data} loading={isLoading} />\n        <CopyToClipboardButton data={formattedData} columns={columnNames} />\n      </div>\n    </TableControlsWrapper>\n  );\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState } from 'react';\nimport { t } from '@superset-ui/core';\nimport TableView, { EmptyWrapperType } from 'src/components/TableView';\nimport {\n  useFilteredTableData,\n  useTableColumns,\n} from 'src/explore/components/DataTableControl';\nimport { TableControls } from './DataTableControls';\nimport { SingleQueryResultPaneProp } from '../types';\n\nexport const SingleQueryResultPane = ({\n  data,\n  colnames,\n  coltypes,\n  datasourceId,\n  dataSize = 50,\n  isVisible,\n}: SingleQueryResultPaneProp) => {\n  const [filterText, setFilterText] = useState('');\n\n  // this is to preserve the order of the columns, even if there are integer values,\n  // while also only grabbing the first column's keys\n  const columns = useTableColumns(\n    colnames,\n    coltypes,\n    data,\n    datasourceId,\n    isVisible,\n  );\n  const filteredData = useFilteredTableData(filterText, data);\n\n  return (\n    <>\n      <TableControls\n        data={filteredData}\n        columnNames={colnames}\n        columnTypes={coltypes}\n        datasourceId={datasourceId}\n        onInputChange={input => setFilterText(input)}\n        isLoading={false}\n      />\n      <TableView\n        columns={columns}\n        data={filteredData}\n        pageSize={dataSize}\n        noDataText={t('No results')}\n        emptyWrapperType={EmptyWrapperType.Small}\n        className=\"table-condensed\"\n        isPaginationSticky\n        showRowCount={false}\n        small\n      />\n    </>\n  );\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState, useEffect } from 'react';\nimport {\n  ensureIsArray,\n  styled,\n  t,\n  getChartMetadataRegistry,\n} from '@superset-ui/core';\nimport Loading from 'src/components/Loading';\nimport { EmptyStateMedium } from 'src/components/EmptyState';\nimport { getChartDataRequest } from 'src/components/Chart/chartAction';\nimport { getClientErrorObject } from 'src/utils/getClientErrorObject';\nimport { ResultsPaneProps, QueryResultInterface } from '../types';\nimport { SingleQueryResultPane } from './SingleQueryResultPane';\nimport { TableControls } from './DataTableControls';\n\nconst Error = styled.pre`\n  margin-top: ${({ theme }) => `${theme.gridUnit * 4}px`};\n`;\n\nconst cache = new WeakMap();\n\nexport const useResultsPane = ({\n  isRequest,\n  queryFormData,\n  queryForce,\n  ownState,\n  errorMessage,\n  actions,\n  isVisible,\n  dataSize = 50,\n}: ResultsPaneProps): React.ReactElement[] => {\n  const metadata = getChartMetadataRegistry().get(\n    queryFormData?.viz_type || queryFormData?.vizType,\n  );\n\n  const [resultResp, setResultResp] = useState<QueryResultInterface[]>([]);\n  const [isLoading, setIsLoading] = useState<boolean>(true);\n  const [responseError, setResponseError] = useState<string>('');\n  const queryCount = metadata?.queryObjectCount ?? 1;\n\n  useEffect(() => {\n    // it's an invalid formData when gets a errorMessage\n    if (errorMessage) return;\n    if (isRequest && cache.has(queryFormData)) {\n      setResultResp(ensureIsArray(cache.get(queryFormData)));\n      setResponseError('');\n      if (queryForce && actions) {\n        actions.setForceQuery(false);\n      }\n      setIsLoading(false);\n    }\n    if (isRequest && !cache.has(queryFormData)) {\n      setIsLoading(true);\n      getChartDataRequest({\n        formData: queryFormData,\n        force: queryForce,\n        resultFormat: 'json',\n        resultType: 'results',\n        ownState,\n      })\n        .then(({ json }) => {\n          setResultResp(ensureIsArray(json.result));\n          setResponseError('');\n          cache.set(queryFormData, json.result);\n          if (queryForce && actions) {\n            actions.setForceQuery(false);\n          }\n        })\n        .catch(response => {\n          getClientErrorObject(response).then(({ error, message }) => {\n            setResponseError(error || message || t('Sorry, an error occurred'));\n          });\n        })\n        .finally(() => {\n          setIsLoading(false);\n        });\n    }\n  }, [queryFormData, isRequest]);\n\n  useEffect(() => {\n    if (errorMessage) {\n      setIsLoading(false);\n    }\n  }, [errorMessage]);\n\n  if (isLoading) {\n    return Array(queryCount).fill(<Loading />);\n  }\n\n  if (errorMessage) {\n    const title = t('Run a query to display results');\n    return Array(queryCount).fill(\n      <EmptyStateMedium image=\"document.svg\" title={title} />,\n    );\n  }\n\n  if (responseError) {\n    const err = (\n      <>\n        <TableControls\n          data={[]}\n          columnNames={[]}\n          columnTypes={[]}\n          datasourceId={queryFormData.datasource}\n          onInputChange={() => {}}\n          isLoading={false}\n        />\n        <Error>{responseError}</Error>\n      </>\n    );\n    return Array(queryCount).fill(err);\n  }\n\n  if (resultResp.length === 0) {\n    const title = t('No results were returned for this query');\n    return Array(queryCount).fill(\n      <EmptyStateMedium image=\"document.svg\" title={title} />,\n    );\n  }\n\n  return resultResp\n    .slice(0, queryCount)\n    .map((result, idx) => (\n      <SingleQueryResultPane\n        data={result.data}\n        colnames={result.colnames}\n        coltypes={result.coltypes}\n        dataSize={dataSize}\n        datasourceId={queryFormData.datasource}\n        key={idx}\n        isVisible={isVisible}\n      />\n    ));\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { t, styled } from '@superset-ui/core';\nimport Tabs from 'src/components/Tabs';\nimport { ResultTypes, ResultsPaneProps } from '../types';\nimport { useResultsPane } from './useResultsPane';\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n\n  .ant-tabs {\n    height: 100%;\n  }\n\n  .ant-tabs-content {\n    height: 100%;\n  }\n\n  .ant-tabs-tabpane {\n    display: flex;\n    flex-direction: column;\n  }\n\n  .table-condensed {\n    overflow: auto;\n  }\n`;\n\nexport const ResultsPaneOnDashboard = ({\n  isRequest,\n  queryFormData,\n  queryForce,\n  ownState,\n  errorMessage,\n  actions,\n  isVisible,\n  dataSize = 50,\n}: ResultsPaneProps) => {\n  const resultsPanes = useResultsPane({\n    errorMessage,\n    queryFormData,\n    queryForce,\n    ownState,\n    isRequest,\n    actions,\n    dataSize,\n    isVisible,\n  });\n\n  if (resultsPanes.length === 1) {\n    return <Wrapper>{resultsPanes[0]}</Wrapper>;\n  }\n\n  const panes = resultsPanes.map((pane, idx) => {\n    if (idx === 0) {\n      return (\n        <Tabs.TabPane tab={t('Results')} key={ResultTypes.Results}>\n          {pane}\n        </Tabs.TabPane>\n      );\n    }\n\n    return (\n      <Tabs.TabPane\n        tab={t('Results %s', idx + 1)}\n        key={`${ResultTypes.Results} ${idx + 1}`}\n      >\n        {pane}\n      </Tabs.TabPane>\n    );\n  });\n\n  return (\n    <Wrapper>\n      <Tabs fullWidth={false}>{panes}</Tabs>\n    </Wrapper>\n  );\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { ensureIsArray, GenericDataType, styled, t } from '@superset-ui/core';\nimport Loading from 'src/components/Loading';\nimport { EmptyStateMedium } from 'src/components/EmptyState';\nimport TableView, { EmptyWrapperType } from 'src/components/TableView';\nimport {\n  useFilteredTableData,\n  useTableColumns,\n} from 'src/explore/components/DataTableControl';\nimport { getDatasourceSamples } from 'src/components/Chart/chartAction';\nimport { TableControls } from './DataTableControls';\nimport { SamplesPaneProps } from '../types';\n\nconst Error = styled.pre`\n  margin-top: ${({ theme }) => `${theme.gridUnit * 4}px`};\n`;\n\nconst cache = new WeakSet();\n\nexport const SamplesPane = ({\n  isRequest,\n  datasource,\n  queryForce,\n  actions,\n  dataSize = 50,\n  isVisible,\n}: SamplesPaneProps) => {\n  const [filterText, setFilterText] = useState('');\n  const [data, setData] = useState<Record<string, any>[][]>([]);\n  const [colnames, setColnames] = useState<string[]>([]);\n  const [coltypes, setColtypes] = useState<GenericDataType[]>([]);\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n  const [responseError, setResponseError] = useState<string>('');\n  const datasourceId = useMemo(\n    () => `${datasource.id}__${datasource.type}`,\n    [datasource],\n  );\n\n  useEffect(() => {\n    if (isRequest && queryForce) {\n      cache.delete(datasource);\n    }\n\n    if (isRequest && !cache.has(datasource)) {\n      setIsLoading(true);\n      getDatasourceSamples(datasource.type, datasource.id, queryForce, {})\n        .then(response => {\n          setData(ensureIsArray(response.data));\n          setColnames(ensureIsArray(response.colnames));\n          setColtypes(ensureIsArray(response.coltypes));\n          setResponseError('');\n          cache.add(datasource);\n          if (queryForce && actions) {\n            actions.setForceQuery(false);\n          }\n        })\n        .catch(error => {\n          setData([]);\n          setColnames([]);\n          setColtypes([]);\n          setResponseError(`${error.name}: ${error.message}`);\n        })\n        .finally(() => {\n          setIsLoading(false);\n        });\n    }\n  }, [datasource, isRequest, queryForce]);\n\n  // this is to preserve the order of the columns, even if there are integer values,\n  // while also only grabbing the first column's keys\n  const columns = useTableColumns(\n    colnames,\n    coltypes,\n    data,\n    datasourceId,\n    isVisible,\n  );\n  const filteredData = useFilteredTableData(filterText, data);\n\n  if (isLoading) {\n    return <Loading />;\n  }\n\n  if (responseError) {\n    return (\n      <>\n        <TableControls\n          data={filteredData}\n          columnNames={colnames}\n          columnTypes={coltypes}\n          datasourceId={datasourceId}\n          onInputChange={input => setFilterText(input)}\n          isLoading={isLoading}\n        />\n        <Error>{responseError}</Error>\n      </>\n    );\n  }\n\n  if (data.length === 0) {\n    const title = t('No samples were returned for this dataset');\n    return <EmptyStateMedium image=\"document.svg\" title={title} />;\n  }\n\n  return (\n    <>\n      <TableControls\n        data={filteredData}\n        columnNames={colnames}\n        columnTypes={coltypes}\n        datasourceId={datasourceId}\n        onInputChange={input => setFilterText(input)}\n        isLoading={isLoading}\n      />\n      <TableView\n        columns={columns}\n        data={filteredData}\n        pageSize={dataSize}\n        noDataText={t('No results')}\n        emptyWrapperType={EmptyWrapperType.Small}\n        className=\"table-condensed\"\n        isPaginationSticky\n        showRowCount={false}\n        small\n      />\n    </>\n  );\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useState,\n  MouseEvent,\n} from 'react';\nimport { styled, t, useTheme } from '@superset-ui/core';\nimport Icons from 'src/components/Icons';\nimport Tabs from 'src/components/Tabs';\nimport { FeatureFlag, isFeatureEnabled } from 'src/featureFlags';\nimport {\n  getItem,\n  setItem,\n  LocalStorageKeys,\n} from 'src/utils/localStorageHelpers';\nimport {\n  SamplesPane,\n  TableControlsWrapper,\n  useResultsPane,\n} from './components';\nimport { DataTablesPaneProps, ResultTypes } from './types';\n\nconst SouthPane = styled.div`\n  ${({ theme }) => `\n    position: relative;\n    background-color: ${theme.colors.grayscale.light5};\n    z-index: 5;\n    overflow: hidden;\n\n    .ant-tabs {\n      height: 100%;\n    }\n\n    .ant-tabs-content-holder {\n      height: 100%;\n    }\n\n    .ant-tabs-content {\n      height: 100%;\n    }\n\n    .ant-tabs-tabpane {\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n\n      .table-condensed {\n        height: 100%;\n        overflow: auto;\n        margin-bottom: ${theme.gridUnit * 4}px;\n\n        .table {\n          margin-bottom: ${theme.gridUnit * 2}px;\n        }\n      }\n\n      .pagination-container > ul[role='navigation'] {\n        margin-top: 0;\n      }\n    }\n  `}\n`;\n\nexport const DataTablesPane = ({\n  queryFormData,\n  datasource,\n  queryForce,\n  onCollapseChange,\n  chartStatus,\n  ownState,\n  errorMessage,\n  actions,\n}: DataTablesPaneProps) => {\n  const theme = useTheme();\n  const [activeTabKey, setActiveTabKey] = useState<string>(ResultTypes.Results);\n  const [isRequest, setIsRequest] = useState<Record<ResultTypes, boolean>>({\n    results: false,\n    samples: false,\n  });\n  const [panelOpen, setPanelOpen] = useState(\n    isFeatureEnabled(FeatureFlag.DATAPANEL_CLOSED_BY_DEFAULT)\n      ? false\n      : getItem(LocalStorageKeys.is_datapanel_open, false),\n  );\n\n  useEffect(() => {\n    if (!isFeatureEnabled(FeatureFlag.DATAPANEL_CLOSED_BY_DEFAULT))\n      setItem(LocalStorageKeys.is_datapanel_open, panelOpen);\n  }, [panelOpen]);\n\n  useEffect(() => {\n    if (!panelOpen) {\n      setIsRequest({\n        results: false,\n        samples: false,\n      });\n    }\n\n    if (\n      panelOpen &&\n      activeTabKey.startsWith(ResultTypes.Results) &&\n      chartStatus === 'rendered'\n    ) {\n      setIsRequest({\n        results: true,\n        samples: false,\n      });\n    }\n\n    if (panelOpen && activeTabKey === ResultTypes.Samples) {\n      setIsRequest({\n        results: false,\n        samples: true,\n      });\n    }\n  }, [panelOpen, activeTabKey, chartStatus]);\n\n  const handleCollapseChange = useCallback(\n    (isOpen: boolean) => {\n      onCollapseChange(isOpen);\n      setPanelOpen(isOpen);\n    },\n    [onCollapseChange],\n  );\n\n  const handleTabClick = useCallback(\n    (tabKey: string, e: MouseEvent) => {\n      if (!panelOpen) {\n        handleCollapseChange(true);\n      } else if (tabKey === activeTabKey) {\n        e.preventDefault();\n        handleCollapseChange(false);\n      }\n      setActiveTabKey(tabKey);\n    },\n    [activeTabKey, handleCollapseChange, panelOpen],\n  );\n\n  const CollapseButton = useMemo(() => {\n    const caretIcon = panelOpen ? (\n      <Icons.CaretUp\n        iconColor={theme.colors.grayscale.base}\n        aria-label={t('Collapse data panel')}\n      />\n    ) : (\n      <Icons.CaretDown\n        iconColor={theme.colors.grayscale.base}\n        aria-label={t('Expand data panel')}\n      />\n    );\n    return (\n      <TableControlsWrapper>\n        {panelOpen ? (\n          <span\n            role=\"button\"\n            tabIndex={0}\n            onClick={() => handleCollapseChange(false)}\n          >\n            {caretIcon}\n          </span>\n        ) : (\n          <span\n            role=\"button\"\n            tabIndex={0}\n            onClick={() => handleCollapseChange(true)}\n          >\n            {caretIcon}\n          </span>\n        )}\n      </TableControlsWrapper>\n    );\n  }, [handleCollapseChange, panelOpen, theme.colors.grayscale.base]);\n\n  const queryResultsPanes = useResultsPane({\n    errorMessage,\n    queryFormData,\n    queryForce,\n    ownState,\n    isRequest: isRequest.results,\n    actions,\n    isVisible: ResultTypes.Results === activeTabKey,\n  }).map((pane, idx) => {\n    if (idx === 0) {\n      return (\n        <Tabs.TabPane tab={t('Results')} key={ResultTypes.Results}>\n          {pane}\n        </Tabs.TabPane>\n      );\n    }\n    if (idx > 0) {\n      return (\n        <Tabs.TabPane\n          tab={t('Results %s', idx + 1)}\n          key={`${ResultTypes.Results} ${idx + 1}`}\n        >\n          {pane}\n        </Tabs.TabPane>\n      );\n    }\n    return null;\n  });\n\n  return (\n    <SouthPane data-test=\"some-purposeful-instance\">\n      <Tabs\n        fullWidth={false}\n        tabBarExtraContent={CollapseButton}\n        activeKey={panelOpen ? activeTabKey : ''}\n        onTabClick={handleTabClick}\n      >\n        {queryResultsPanes}\n        <Tabs.TabPane tab={t('Samples')} key={ResultTypes.Samples}>\n          <SamplesPane\n            datasource={datasource}\n            queryForce={queryForce}\n            isRequest={isRequest.samples}\n            actions={actions}\n            isVisible={ResultTypes.Samples === activeTabKey}\n          />\n        </Tabs.TabPane>\n      </Tabs>\n    </SouthPane>\n  );\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useEffect, useState } from 'react';\nimport { styled, ensureIsArray, t } from '@superset-ui/core';\nimport Loading from 'src/components/Loading';\nimport { getClientErrorObject } from 'src/utils/getClientErrorObject';\nimport { getChartDataRequest } from 'src/components/Chart/chartAction';\nimport ViewQuery from 'src/explore/components/controls/ViewQuery';\n\ninterface Props {\n  latestQueryFormData: object;\n}\n\ntype Result = {\n  query: string;\n  language: string;\n};\n\nconst ViewQueryModalContainer = styled.div`\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst ViewQueryModal: React.FC<Props> = props => {\n  const [result, setResult] = useState<Result[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const loadChartData = (resultType: string) => {\n    setIsLoading(true);\n    getChartDataRequest({\n      formData: props.latestQueryFormData,\n      resultFormat: 'json',\n      resultType,\n    })\n      .then(({ json }) => {\n        setResult(ensureIsArray(json.result));\n        setIsLoading(false);\n        setError(null);\n      })\n      .catch(response => {\n        getClientErrorObject(response).then(({ error, message }) => {\n          setError(\n            error ||\n              message ||\n              response.statusText ||\n              t('Sorry, An error occurred'),\n          );\n          setIsLoading(false);\n        });\n      });\n  };\n  useEffect(() => {\n    loadChartData('query');\n  }, [JSON.stringify(props.latestQueryFormData)]);\n\n  if (isLoading) {\n    return <Loading />;\n  }\n  if (error) {\n    return <pre>{error}</pre>;\n  }\n\n  return (\n    <ViewQueryModalContainer>\n      {result.map(item =>\n        item.query ? (\n          <ViewQuery sql={item.query} language={item.language || undefined} />\n        ) : null,\n      )}\n    </ViewQueryModalContainer>\n  );\n};\n\nexport default ViewQueryModal;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { useEffect } from 'react';\nimport { usePrevious } from '../usePrevious';\n\n/**\n * Calls the callback when the value changes.\n *\n * Passes the previous and current values to the callback\n */\nexport function useChangeEffect<T>(\n  value: T,\n  callback: (previous: T | undefined, current: T) => void,\n) {\n  const previous = usePrevious(value);\n  useEffect(() => {\n    if (value !== previous) {\n      callback(previous, value);\n    }\n  }, [value, previous, callback]);\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useEffect, useState } from 'react';\nimport shortid from 'shortid';\nimport { BroadcastChannel } from 'broadcast-channel';\n\ninterface TabIdChannelMessage {\n  type: 'REQUESTING_TAB_ID' | 'TAB_ID_DENIED';\n  tabId: string;\n}\n\n// TODO: We are using broadcast-channel to support Safari.\n// The native BroadcastChannel API will be supported in Safari version 15.4.\n// After that, we should remove this dependency and use the native API.\nconst channel = new BroadcastChannel<TabIdChannelMessage>('tab_id_channel');\n\nexport function useTabId() {\n  const [tabId, setTabId] = useState<string>();\n\n  function isStorageAvailable() {\n    try {\n      return window.localStorage && window.sessionStorage;\n    } catch (error) {\n      return false;\n    }\n  }\n  useEffect(() => {\n    if (!isStorageAvailable()) {\n      if (!tabId) {\n        setTabId(shortid.generate());\n      }\n      return;\n    }\n\n    const updateTabId = () => {\n      const lastTabId = window.localStorage.getItem('last_tab_id');\n      const newTabId = String(\n        lastTabId ? Number.parseInt(lastTabId, 10) + 1 : 1,\n      );\n      window.sessionStorage.setItem('tab_id', newTabId);\n      window.localStorage.setItem('last_tab_id', newTabId);\n      setTabId(newTabId);\n    };\n\n    const storedTabId = window.sessionStorage.getItem('tab_id');\n    if (storedTabId) {\n      channel.postMessage({\n        type: 'REQUESTING_TAB_ID',\n        tabId: storedTabId,\n      });\n      setTabId(storedTabId);\n    } else {\n      updateTabId();\n    }\n\n    channel.onmessage = messageEvent => {\n      if (messageEvent.tabId === tabId) {\n        if (messageEvent.type === 'REQUESTING_TAB_ID') {\n          const message: TabIdChannelMessage = {\n            type: 'TAB_ID_DENIED',\n            tabId: messageEvent.tabId,\n          };\n          channel.postMessage(message);\n        } else if (messageEvent.type === 'TAB_ID_DENIED') {\n          updateTabId();\n        }\n      }\n    };\n  }, [tabId]);\n\n  return tabId;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { SyntheticEvent } from 'react';\nimport domToImage from 'dom-to-image-more';\nimport kebabCase from 'lodash/kebabCase';\nimport { t, supersetTheme } from '@superset-ui/core';\nimport { addWarningToast } from 'src/components/MessageToasts/actions';\n\n/**\n * generate a consistent file stem from a description and date\n *\n * @param description title or description of content of file\n * @param date date when file was generated\n */\nconst generateFileStem = (description: string, date = new Date()) =>\n  `${kebabCase(description)}-${date.toISOString().replace(/[: ]/g, '-')}`;\n\n/**\n * Create an event handler for turning an element into an image\n *\n * @param selector css selector of the parent element which should be turned into image\n * @param description name or a short description of what is being printed.\n *   Value will be normalized, and a date as well as a file extension will be added.\n * @param isExactSelector if false, searches for the closest ancestor that matches selector.\n * @returns event handler\n */\nexport default function downloadAsImage(\n  selector: string,\n  description: string,\n  isExactSelector = false,\n) {\n  return (event: SyntheticEvent) => {\n    const elementToPrint = isExactSelector\n      ? document.querySelector(selector)\n      : event.currentTarget.closest(selector);\n\n    if (!elementToPrint) {\n      return addWarningToast(\n        t('Image download failed, please refresh and try again.'),\n      );\n    }\n\n    // Mapbox controls are loaded from different origin, causing CORS error\n    // See https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toDataURL#exceptions\n    const filter = (node: Element) => {\n      if (typeof node.className === 'string') {\n        return (\n          node.className !== 'mapboxgl-control-container' &&\n          !node.className.includes('ant-dropdown')\n        );\n      }\n      return true;\n    };\n\n    return domToImage\n      .toJpeg(elementToPrint, {\n        quality: 0.95,\n        bgcolor: supersetTheme.colors.grayscale.light4,\n        filter,\n      })\n      .then(dataUrl => {\n        const link = document.createElement('a');\n        link.download = `${generateFileStem(description)}.jpg`;\n        link.href = dataUrl;\n        link.click();\n      })\n      .catch(e => {\n        console.error('Creating image failed', e);\n      });\n  };\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { t } from '@superset-ui/core';\n\nconst CREATE_CHART_TEXT = t('Create chart');\nconst UPDATE_CHART_TEXT = t('Update chart');\n\nexport const getChartRequiredFieldsMissingMessage = (isCreating: boolean) =>\n  t(\n    'Select values in highlighted field(s) in the control panel. Then run the query by clicking on the %s button.',\n    `\"${isCreating ? CREATE_CHART_TEXT : UPDATE_CHART_TEXT}\"`,\n  );\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n// navigator.webdriver is true when browser is controlled by a bot\nexport const isCurrentUserBot = () => window?.navigator?.webdriver;\n"],"names":["ChartSource","ChartContextMenu","ref","id","formData","onSelection","onClose","canExplore","useSelector","state","findPermission","user","roles","filters","clientX","clientY","setState","useState","menuItems","showDrillToDetail","isFeatureEnabled","FeatureFlag","push","DrillDetail","chartId","isContextMenu","contextMenuY","open","useCallback","itemsCount","reduce","a","b","adjustedY","getMenuAdjustedY","document","getElementById","click","useImperativeHandle","ReactDOM","overlay","Menu","length","disabled","trigger","onVisibleChange","value","css","visibility","position","top","left","width","height","body","forwardRef","propTypes","annotationData","PropTypes","actions","datasource","initialValues","latestQueryFormData","labelColors","sharedLabelColors","setControlValue","vizType","triggerRender","chartAlert","chartStatus","queriesResponse","triggerQuery","chartIsStale","addFilter","setDataMask","onFilterMenuOpen","onFilterMenuClose","ownState","postTransformProps","source","Dashboard","Explore","emitCrossFilters","BLANK","behaviors","Behavior","defaultProps","ChartRenderer","React","constructor","props","super","this","showContextMenu","inContextMenu","hasQueryResponseChange","contextMenuRef","handleAddFilter","bind","handleRenderSuccess","handleRenderFailure","handleSetControlValue","handleOnContextMenu","handleContextMenuSelected","handleContextMenuClosed","onContextMenuFallback","hooks","onAddFilter","onContextMenu","undefined","onError","dataMask","updateDataMask","shouldComponentUpdate","nextProps","nextState","indexOf","error","filterState","color_scheme","stack","cacheBusterProp","col","vals","merge","refresh","chartRenderingSucceeded","logEvent","LOG_ACTIONS_RENDER_CHART","slice_id","viz_type","start_offset","renderStartTime","ts","Date","getTime","duration","Logger","info","logging","chartRenderingFailed","toString","componentStack","has_err","error_details","offsetX","offsetY","current","event","preventDefault","render","currentFormData","snakeCaseVizType","chartClassName","noResultsComponent","noResultTitle","t","noResultDescription","noResultImage","EmptyState","title","description","image","drillToDetailProps","getChartMetadataRegistry","get","find","behavior","SuperChart","disableErrorBoundary","key","className","chartType","queriesData","onRenderSuccess","onRenderFailure","noResults","ChartErrorMessage","result","owners","useChartOwnerNames","ownedError","extra","ErrorMessageWithStackTrace","dashboardId","timeout","force","isFiltersInitialized","isDeactivatedViz","chartStackTrace","errorMessage","onQuery","datasetsStatus","isInView","NONEXISTENT_DATASET","Styles","styled","p","theme","typography","sizes","s","gridUnit","MonospaceDiv","families","monospace","Chart","handleRenderContainerFailure","componentDidMount","filterboxMigrationState","runQuery","componentDidUpdate","getSavedChart","getUrlParam","URL_PARAMS","postChartFormData","renderErrorMessage","queryResponse","errors","message","PLACEHOLDER_DATASOURCE","ResourceStatus","Loading","subtitle","copyText","link","stackTrace","isLoading","renderContainerStartTime","map","item","ensureIsArray","getChartRequiredFieldsMissingMessage","ErrorBoundary","showMessage","isCurrentUserBot","role","tabIndex","onClick","connect","dispatch","bindActionCreators","CopyButtonEmbedCode","CopyButton","addDangerToast","setHeight","setWidth","url","setUrl","setErrorMessage","handleInputChange","e","name","currentTarget","updateUrl","getChartPermalink","then","catch","useEffect","html","useMemo","srcLink","text","CopyToClipboard","shouldShowText","copyNode","buttonSize","rows","readOnly","colors","secondary","light5","htmlFor","Input","type","defaultValue","onChange","dashboards","menuProps","useTheme","dashboardSearch","setDashboardSearch","hoveredItem","setHoveredItem","showSearch","filteredDashboards","filter","dashboard","dashboard_title","toLowerCase","noResultsFound","urlQueryString","allowClear","placeholder","prefix","Icons","iconSize","String","onMouseEnter","onMouseLeave","target","rel","to","iconColor","grayscale","base","MENU_KEYS","VIZ_TYPES_PIVOTABLE","MenuItemWithCheckboxContainer","iconReset","Button","primary","dark2","light1","useExploreAdditionalActionsMenu","canDownloadCSV","slice","onOpenInEditor","onOpenPropertiesModal","addSuccessToast","useToasts","showReportSubMenu","setShowReportSubMenu","isDropdownVisible","setIsDropdownVisible","openSubmenus","setOpenSubmenus","chart","charts","getChartKey","explore","shareByEmail","async","subject","encodeURIComponent","window","location","href","exportCSV","exportChart","resultType","resultFormat","exportCSVPivoted","exportJson","exportExcel","copyLink","Error","copyTextToClipboard","handleMenuClick","domEvent","downloadAsImage","slice_name","selectable","openKeys","onOpenChange","icon","ModalTrigger","triggerNode","modalTitle","modalBody","maxWidth","destroyOnClose","responsive","useTextMenu","ViewQueryModal","draggable","resizable","BOOL_TRUE_DISPLAY","BOOL_FALSE_DISPLAY","NULL_DISPLAY","format","TimeFormats","getTimeFormatter","headerTitle","groupTitle","groupOptions","popoverVisible","setPopoverVisible","Popover","visible","content","weights","bold","Radio","direction","option","label","placement","arrowPointAtCenter","TableControls","setFilters","totalCount","loading","onReload","filterMap","Object","assign","isAdhocColumn","removeFilter","colName","updatedFilterMap","values","filterTags","entries","val","formattedVal","sort","localeCompare","closable","RowCountLabel","rowcount","TimeFormatting","Resizable","children","useResizeDetector","DrillDetailPane","initialFilters","pageIndex","setPageIndex","lastPageIndex","useRef","setIsLoading","responseError","setResponseError","resultsPages","setResultsPages","Map","timeFormatting","setTimeFormatting","SAMPLES_ROW_LIMIT","common","conf","datasourceId","datasourceType","split","resultsPage","nextResultsPage","mappedColumns","colNames","column","index","dataIndex","colTypes","GenericDataType","Original","Formatted","data","row","acc","curr","handleReload","has","keys","at","nextResultsPages","delete","set","jsonPayload","queryFormData","drillFilters","queryObject","buildQueryObject","extras","f","granularity","time_range","getDrillPayload","cachePageLimit","Math","ceil","getDatasourceSamples","response","total","total_count","colnames","coltypes","finally","useApiV1Resource","bootstrapping","size","status","tableContent","Table","columns","TableSize","defaultPageSize","recordCount","usePagination","pagination","virtualize","metadata","items","changed_on_humanized","created_on_humanized","table_name","changed_by","created_by","notAvailable","createdBy","first_name","last_name","trim","modifiedBy","formattedOwners","owner","MetadataType","createdOn","MetadataBar","tooltipPlacement","Alert","ModalFooter","exploreChart","closeModal","buttonStyle","DrillDetailModal","showModal","onHideModal","history","useHistory","dashboardPageId","useContext","DashboardPageIdContext","chartName","sliceEntities","slices","exploreUrl","Modal","show","onHide","footer","resizableConfig","minHeight","minWidth","defaultSize","maskClosable","DRILL_TO_DETAIL_TEXT","DisabledMenuItemTooltip","Tooltip","DisabledMenuItem","Filter","modalFilters","setShowModal","openModal","handlesDimensionContextMenu","noAggregations","metrics","extractQueryFields","drillToDetailMenuItem","drillToDetailByMenuItem","submenuYOffset","submenuY","MENU_ITEM_HEIGHT","popupOffset","i","vh","max","documentElement","clientHeight","innerHeight","menuHeight","LOCALE","everyText","emptyMonths","emptyMonthDays","emptyMonthDaysShort","emptyWeekDays","emptyWeekDaysShort","emptyHours","emptyMinutes","emptyMinutesForHourPeriod","yearOption","monthOption","weekOption","dayOption","hourOption","minuteOption","rebootOption","prefixPeriod","prefixMonths","prefixMonthDays","prefixWeekDays","prefixWeekDaysForMonthAndYearPeriod","prefixHours","prefixMinutes","prefixMinutesForHourPeriod","suffixMinutesForHourPeriod","errorInvalidCron","clearButtonText","weekDays","months","altWeekDays","altMonths","CronPicker","getPopupContainer","parentElement","locale","light4","MenuDots","normal","MenuDotsWrapper","IconOrientation","Dropdown","iconOrientation","VERTICAL","rest","HORIZONTAL","RenderIcon","NoAnimationDropdown","overlayStyle","zIndex","animationDuration","Header","Info","header","SPACE_BETWEEN_ITEMS","ORDER","table","sql","tags","lastModified","Bar","count","HORIZONTAL_PADDING","borderRadius","StyledItem","collapsed","last","ICON_WIDTH","TootipContent","Item","barWidth","contentType","tooltip","DASHBOARDS","DESCRIPTION","LAST_MODIFIED","OWNER","ROWS","SQL","TABLE","TAGS","join","config","isTruncated","setIsTruncated","Icon","scrollWidth","clientWidth","setCollapsed","sortedItems","onResize","breakpoint","Boolean","ReportType","NOTIFICATION_FORMATS","StyledModal","StyledTopSection","StyledBottomSection","light2","StyledIconWrapper","StyledScheduleTitle","StyledCronPicker","StyledCronError","noBottomMargin","StyledFooterButton","StyledMessageContentTitle","StyledRadio","StyledRadioGroup","TEXT_BASED_VISUALIZATION_TYPES","INITIAL_STATE","crontab","withToasts","userId","userEmail","creationMethod","dashboardName","sliceFormData","isChart","isTextBasedChart","defaultNotificationFormat","TEXT","PNG","entityName","initialState","reportReducer","action","currentReport","setCurrentReport","useReducer","cronError","setCronError","useDispatch","report","resourceType","CreationMethod","CHARTS","reportSelector","isEditMode","wrappedTitle","renderModalFooter","newReportValues","active","force_screenshot","creation_method","recipients","recipient_config_json","report_format","timezone","isSubmitting","editReport","addReport","getClientErrorObject","renderMessageContentSection","CSV","centered","LabeledErrorBoundInput","required","validationMethods","SectionHeaderStyle","clearButton","setValue","newValue","TimezoneHeaderStyle","TimezoneSelector","onTimezoneChange","m","l","antDErrorAlertStyles","extensionsRegistry","getExtensionsRegistry","deleteColor","onMenuHover","dark1","onMenuItemHover","StyledDropdownItemWithIcon","DropdownItemExtension","HeaderReportDropDown","isReportActive","canAddReports","perms","some","permission","currentReportDeleting","setCurrentReportDeleting","prevDashboard","usePrevious","toggleActiveKey","checked","toggleActive","shouldFetch","fetchUISpecificReport","filterField","resourceId","handleShowMenu","email","Checkbox","noOp","Switch","marginLeft","closest","DeleteModal","onConfirm","deleteActiveReport","handleReportDelete","StyledSwitch","BaseSwitch","DEFAULT_TIMEZONE","MIN_SELECT_WIDTH","offsetsToName","currentDate","moment","JANUARY","JULY","getOffsetKey","tz","utcOffset","getTimezoneName","offsets","isDST","ALL_ZONES","country","flat","TIMEZONES","forEach","zone","TIMEZONE_OPTIONS","timezoneName","TIMEZONE_OPTIONS_SORT_COMPARATOR","validTimezone","matchTimezoneToOptions","ariaLabel","options","sortComparator","getRelevantDataMask","prop","prev","next","getAllActiveFilters","chartConfiguration","nativeFilters","allSliceIds","activeFilters","filterId","extraFormData","scope","chartsInScope","crossFilters","getEffectiveExtraFilters","op","Array","isArray","cachedFiltersByChart","cachedFormdataByChart","getFormDataWithExtraFilters","colorScheme","colorNamespace","sliceId","extraControls","cachedFormData","areObjectsEqual","ignoreUndefined","color_namespace","label_colors","shared_label_colors","extraData","filterIdsAppliedOnChart","extra_form_data","getExtraFormData","form_data","extra_filters","ResultTypes","TableControlsWrapper","onInputChange","columnNames","columnTypes","originalTimeColumns","getTimeColumns","formattedTimeColumns","colname","formattedData","applyFormattingToTabularData","onChangeHandler","SingleQueryResultPane","dataSize","isVisible","filterText","setFilterText","useTableColumns","filteredData","useFilteredTableData","input","TableView","pageSize","noDataText","emptyWrapperType","EmptyWrapperType","isPaginationSticky","showRowCount","small","cache","WeakMap","useResultsPane","isRequest","queryForce","resultResp","setResultResp","queryCount","queryObjectCount","setForceQuery","getChartDataRequest","json","fill","err","idx","Wrapper","ResultsPaneOnDashboard","resultsPanes","panes","pane","Tabs","tab","Results","fullWidth","WeakSet","SamplesPane","setData","setColnames","setColtypes","add","SouthPane","DataTablesPane","onCollapseChange","activeTabKey","setActiveTabKey","setIsRequest","results","samples","panelOpen","setPanelOpen","getItem","LocalStorageKeys","setItem","startsWith","Samples","handleCollapseChange","isOpen","handleTabClick","tabKey","CollapseButton","caretIcon","queryResultsPanes","tabBarExtraContent","activeKey","onTabClick","ViewQueryModalContainer","setResult","setError","statusText","JSON","stringify","query","language","useChangeEffect","callback","previous","channel","BroadcastChannel","useTabId","tabId","setTabId","localStorage","sessionStorage","isStorageAvailable","shortid","updateTabId","lastTabId","newTabId","Number","parseInt","storedTabId","postMessage","onmessage","messageEvent","selector","isExactSelector","elementToPrint","querySelector","domToImage","quality","bgcolor","supersetTheme","node","dataUrl","createElement","download","date","kebabCase","toISOString","replace","generateFileStem","console","addWarningToast","CREATE_CHART_TEXT","UPDATE_CHART_TEXT","isCreating","navigator","webdriver"],"sourceRoot":""}